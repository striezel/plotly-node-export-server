const assert = require('node:assert');
const http = require('node:http');
const { describe, it } = require('node:test');

describe('scientific charts, part 1', () => {
  describe('contour plots', () => {
    // TODO: Simple Contour Plot - https://plotly.com/javascript/contour-plots/#simple-contour-plot

    it('Basic Contour Plot', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/contour-plots/#basic-contour-plot example.
      const payload = `{
                         "data": [
                           {
                             "z": [ [ 10, 10.625, 12.5, 15.625, 20 ],
                                    [ 5.625, 6.25, 8.125, 11.25, 15.625 ],
                                    [ 2.5, 3.125, 5, 8.125, 12.5 ],
                                    [ 0.625, 1.25, 3.125, 6.25, 10.625 ],
                                    [ 0, 0.625, 2.5, 5.625, 10 ] ],
                             "type": "contour"
                           }
                         ],
                         "layout": {
                           "title": {
                             "text": "Basic Contour Plot"
                           }
                         }
                       }`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based answer would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-115d50"><g class="clips"><clipPath id="clip115d50xyplot" class="plotclip"><rect width="531" height="270"/></clipPath><clipPath class="axesclip" id="clip115d50x"><rect x="80" y="0" width="531" height="450"/></clipPath><clipPath class="axesclip" id="clip115d50y"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clip115d50xy"><rect x="80" y="100" width="531" height="270"/></clipPath><clipPath class="contourclip" id="clipc3baf2"><path d="M0,0L531,0L531,270L0,270Z"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(212.75,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(345.5,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(478.25,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,302.5)" d="M80,0h531" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,235)" d="M80,0h531" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,167.5)" d="M80,0h531" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(80,0)" d="M0,100v270" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,370)" d="M80,0h531" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip115d50xyplot)"><g class="contourlayer mlayer"><g class="contour" clip-path="url(#clipc3baf2)" style="opacity: 1;"><g class="heatmapcoloring"/><g class="contourbg"><path d="M0,0L531,0L531,270L0,270Z" style="stroke: none; fill: rgb(5, 10, 172);"/></g><g class="contourfill"><path d="M0,117Q99.09,105.62 132.75,94.5C155.14,87.1 170.47,81.27 185.85,67.5Q203.75,51.47 230.1,0L531,0L531,270L0,270Z" style="stroke: none; fill: rgb(37, 50, 196);"/><path d="M0,167.4Q97.11,161.08 132.75,153.9C157.58,148.9 173.74,143.45 194.7,135C217.92,125.64 246.26,111.79 265.5,99C280.57,88.98 292.59,81.58 302.67,67.5Q314.96,50.32 329.22,0L531,0L531,270L0,270Z" style="stroke: none; fill: rgb(69, 91, 220);"/><path d="M0,208.29Q55.8,204.58 79.65,202.5C99.15,200.8 111.32,201.42 132.75,197.1C167.3,190.14 233.91,169.34 265.5,156.6C284.01,149.14 292.3,145.43 307.98,135C331.19,119.57 374.07,86.45 387.63,67.5C394.78,57.51 394.89,50.5 398.25,40.5Q402.3,28.45 409.63,0L531,0L531,270L0,270Z" style="stroke: none; fill: rgb(101, 131, 243);"/><path d="M0,239.14Q89.1,235.87 132.75,229.5C176.12,223.17 218.75,216.31 261.075,201.15C306.43,184.91 362.27,158.99 395.595,132.75C420.73,112.96 438.85,90.9 451.35,67.5Q462.64,46.35 470.31,0L531,0L531,270L0,270Z" style="stroke: none; fill: rgb(159, 170, 211);"/><path d="M0,270Q88.73,266.72 132.75,260.36C177.23,253.93 227.19,242.51 265.5,231.43C295.76,222.68 321.56,212.74 345.15,202.5C364.93,193.92 380.64,186.17 398.25,175.5C417.32,163.95 437.16,151.57 455.14,135C475.35,116.37 499.35,91.45 512.04,67.5Q523.35,46.15 531,0L531,270Z" style="stroke: none; fill: rgb(207, 179, 158);"/><path d="M230.1,270Q250.13,266.73 265.5,262.29C295.84,253.52 372.53,225.23 398.25,214.07C409.19,209.33 411.12,208.49 421.01,202.5C442.12,189.72 498.27,151.18 515.83,135Q523.73,127.72 531,117L531,270Z" style="stroke: none; fill: rgb(227, 153, 104);"/><path d="M329.22,270Q374.48,255.25 398.25,244.93C425.09,233.28 457.96,216.87 481.69,202.5Q500.77,190.95 531,167.4L531,270Z" style="stroke: none; fill: rgb(217, 110, 74);"/><path d="M409.63,270L531,208.29L531,270Z" style="stroke: none; fill: rgb(197, 60, 51);"/><path d="M470.31,270L531,239.14L531,270Z" style="stroke: none; fill: rgb(178, 10, 28);"/></g><g class="contourlines"><g class="contourlevel"><path class="openline" d="M0,117Q99.09,105.62 132.75,94.5C155.14,87.1 170.47,81.27 185.85,67.5Q203.75,51.47 230.1,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,167.4Q97.11,161.08 132.75,153.9C157.58,148.9 173.74,143.45 194.7,135C217.92,125.64 246.26,111.79 265.5,99C280.57,88.98 292.59,81.58 302.67,67.5Q314.96,50.32 329.22,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,208.29Q55.8,204.58 79.65,202.5C99.15,200.8 111.32,201.42 132.75,197.1C167.3,190.14 233.91,169.34 265.5,156.6C284.01,149.14 292.3,145.43 307.98,135C331.19,119.57 374.07,86.45 387.63,67.5C394.78,57.51 394.89,50.5 398.25,40.5Q402.3,28.45 409.63,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,239.14Q89.1,235.87 132.75,229.5C176.12,223.17 218.75,216.31 261.075,201.15C306.43,184.91 362.27,158.99 395.595,132.75C420.73,112.96 438.85,90.9 451.35,67.5Q462.64,46.35 470.31,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,270Q88.73,266.72 132.75,260.36C177.23,253.93 227.19,242.51 265.5,231.43C295.76,222.68 321.56,212.74 345.15,202.5C364.93,193.92 380.64,186.17 398.25,175.5C417.32,163.95 437.16,151.57 455.14,135C475.35,116.37 499.35,91.45 512.04,67.5Q523.35,46.15 531,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M230.1,270Q250.13,266.73 265.5,262.29C295.84,253.52 372.53,225.23 398.25,214.07C409.19,209.33 411.12,208.49 421.01,202.5C442.12,189.72 498.27,151.18 515.83,135Q523.73,127.72 531,117" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M329.22,270Q374.48,255.25 398.25,244.93C425.09,233.28 457.96,216.87 481.69,202.5Q500.77,190.95 531,167.4" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M409.63,270L531,208.29" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M470.31,270L531,239.14" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g></g></g></g></g></g><path class="xlines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(0, 0, 0); stroke-opacity: 0;" d=""/><path class="ylines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(0, 0, 0); stroke-opacity: 0;" d=""/><g class="overlines-above"/><g class="xaxislayer-above"><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(80,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(212.75,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(345.5,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(478.25,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(611,0)"/><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(80,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(212.75,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(345.5,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(478.25,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(611,0)">4</text></g></g><g class="yaxislayer-above"><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,370)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,302.5)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,235)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,167.5)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,100)"/><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,370)">0</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,302.5)">1</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,235)">2</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,167.5)">3</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,100)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-115d50"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="cbc3baf2 colorbar" transform="translate(80,100)"><rect class="cbbg" x="541.5" y="0" width="66.35000610351562" height="271" style="fill: rgb(0, 0, 0); fill-opacity: 0; stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 0px;"/><g class="cbfills" transform="translate(0,10)"><rect class="cbfill" style="" x="552" y="1" width="30" height="249" fill="#050aac"/><rect class="cbfill" style="" x="552" y="1" width="30" height="224" fill="#2532c4"/><rect class="cbfill" style="" x="552" y="1" width="30" height="199" fill="#455bdc"/><rect class="cbfill" style="" x="552" y="1" width="30" height="174" fill="#6583f3"/><rect class="cbfill" style="" x="552" y="1" width="30" height="149" fill="#9faad3"/><rect class="cbfill" style="" x="552" y="1" width="30" height="124" fill="#cfb39e"/><rect class="cbfill" style="" x="552" y="1" width="30" height="99" fill="#e39968"/><rect class="cbfill" style="" x="552" y="1" width="30" height="74" fill="#d96e4a"/><rect class="cbfill" style="" x="552" y="1" width="30" height="49" fill="#c53c33"/><rect class="cbfill" style="" x="552" y="0" width="30" height="25" fill="#b20a1c"/></g><g class="cblines" transform="translate(0,10)"><path class="cbline" d="M552,225.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,200.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,175.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,150.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,125.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,100.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,75.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,50.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M552,25.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="cbaxis crisp" transform="translate(0,-100)"><g class="ycbc3baf2tick"><text text-anchor="start" x="585.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,360)">0</text></g><g class="ycbc3baf2tick"><text text-anchor="start" x="585.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,310)">4</text></g><g class="ycbc3baf2tick"><text text-anchor="start" x="585.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,260)">8</text></g><g class="ycbc3baf2tick"><text text-anchor="start" x="585.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,210)">12</text></g><g class="ycbc3baf2tick"><text text-anchor="start" x="585.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,160)">16</text></g><g class="ycbc3baf2tick"><text text-anchor="start" x="585.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,109.99999999999999)">20</text></g></g><g class="cbtitleunshift" transform="translate(-80,-100)"><g class="cbtitle"/></g><rect class="cboutline" x="552" y="10" width="30" height="250" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: none; stroke-width: 1px;"/></g><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 17px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Basic Contour Plot</text></g><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is visually almost the same.
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-a8f6dc"><g class="clips"><clipPath id="clipa8f6dcxyplot" class="plotclip"><rect width="540" height="270"/></clipPath><clipPath class="axesclip" id="clipa8f6dcx"><rect x="80" y="0" width="540" height="450"/></clipPath><clipPath class="axesclip" id="clipa8f6dcy"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clipa8f6dcxy"><rect x="80" y="100" width="540" height="270"/></clipPath><clipPath class="contourclip" id="clipb8ad2e"><path d="M0,0L540,0L540,270L0,270Z"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(215,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(485,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,302.5)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,235)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,167.5)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(80,0)" d="M0,100v270" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,370)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clipa8f6dcxyplot)"><g class="contourlayer mlayer"><g class="contour" clip-path="url(#clipb8ad2e)" style="opacity: 1;"><g class="heatmapcoloring"/><g class="contourbg"><path d="M0,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(5, 10, 172);"/></g><g class="contourfill"><path d="M0,117Q100.76,105.64 135,94.5C157.74,87.1 173.34,81.32 189,67.5Q207.15,51.48 234,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(37, 50, 196);"/><path d="M0,167.4Q98.75,161.08 135,153.9C160.24,148.9 176.67,143.46 198,135C221.6,125.64 250.42,111.8 270,99C285.3,88.99 297.55,81.62 307.8,67.5Q320.26,50.34 334.8,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(69, 91, 220);"/><path d="M0,208.29Q56.74,204.58 81,202.5C100.83,200.8 113.2,201.42 135,197.1C170.13,190.14 237.87,169.34 270,156.6C288.81,149.14 297.24,145.44 313.2,135C336.79,119.57 380.41,86.48 394.2,67.5C401.44,57.53 401.58,50.51 405,40.5Q409.12,28.46 416.57,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(101, 131, 243);"/><path d="M0,239.14Q90.61,235.87 135,229.5C179.1,223.17 222.43,216.33 265.5,201.15C311.59,184.91 368.38,159.05 402.3,132.75C427.8,112.98 446.29,90.94 459,67.5Q470.46,46.37 478.29,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(159, 170, 211);"/><path d="M0,270Q90.22,266.72 135,260.36C180.23,253.93 231.03,242.51 270,231.43C300.76,222.68 327,212.74 351,202.5C371.11,193.92 387.08,186.17 405,175.5C424.38,163.96 444.56,151.59 462.86,135C483.39,116.39 507.81,91.49 520.71,67.5Q532.18,46.18 540,0L540,270Z" style="stroke: none; fill: rgb(207, 179, 158);"/><path d="M234,270Q254.37,266.74 270,262.29C300.85,253.52 378.84,225.23 405,214.07C416.11,209.33 418.08,208.49 428.14,202.5C449.6,189.72 506.7,151.2 524.57,135Q532.59,127.73 540,117L540,270Z" style="stroke: none; fill: rgb(227, 153, 104);"/><path d="M334.8,270Q380.81,255.25 405,244.93C432.29,233.29 465.72,216.88 489.86,202.5Q509.25,190.95 540,167.4L540,270Z" style="stroke: none; fill: rgb(217, 110, 74);"/><path d="M416.57,270L540,208.29L540,270Z" style="stroke: none; fill: rgb(197, 60, 51);"/><path d="M478.29,270L540,239.14L540,270Z" style="stroke: none; fill: rgb(178, 10, 28);"/></g><g class="contourlines"><g class="contourlevel"><path class="openline" d="M0,117Q100.76,105.64 135,94.5C157.74,87.1 173.34,81.32 189,67.5Q207.15,51.48 234,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,167.4Q98.75,161.08 135,153.9C160.24,148.9 176.67,143.46 198,135C221.6,125.64 250.42,111.8 270,99C285.3,88.99 297.55,81.62 307.8,67.5Q320.26,50.34 334.8,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,208.29Q56.74,204.58 81,202.5C100.83,200.8 113.2,201.42 135,197.1C170.13,190.14 237.87,169.34 270,156.6C288.81,149.14 297.24,145.44 313.2,135C336.79,119.57 380.41,86.48 394.2,67.5C401.44,57.53 401.58,50.51 405,40.5Q409.12,28.46 416.57,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,239.14Q90.61,235.87 135,229.5C179.1,223.17 222.43,216.33 265.5,201.15C311.59,184.91 368.38,159.05 402.3,132.75C427.8,112.98 446.29,90.94 459,67.5Q470.46,46.37 478.29,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,270Q90.22,266.72 135,260.36C180.23,253.93 231.03,242.51 270,231.43C300.76,222.68 327,212.74 351,202.5C371.11,193.92 387.08,186.17 405,175.5C424.38,163.96 444.56,151.59 462.86,135C483.39,116.39 507.81,91.49 520.71,67.5Q532.18,46.18 540,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M234,270Q254.37,266.74 270,262.29C300.85,253.52 378.84,225.23 405,214.07C416.11,209.33 418.08,208.49 428.14,202.5C449.6,189.72 506.7,151.2 524.57,135Q532.59,127.73 540,117" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M334.8,270Q380.81,255.25 405,244.93C432.29,233.29 465.72,216.88 489.86,202.5Q509.25,190.95 540,167.4" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M416.57,270L540,208.29" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M478.29,270L540,239.14" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g></g></g></g></g></g><path class="xlines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(0, 0, 0); stroke-opacity: 0;" d=""/><path class="ylines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(0, 0, 0); stroke-opacity: 0;" d=""/><g class="overlines-above"/><g class="xaxislayer-above"><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(80,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(215,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(350,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(485,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(620,0)"/><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(80,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(215,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(485,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(620,0)">4</text></g></g><g class="yaxislayer-above"><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,370)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,302.5)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,235)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,167.5)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,100)"/><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,370)">0</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,302.5)">1</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,235)">2</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,167.5)">3</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,100)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-a8f6dc"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="cbb8ad2e colorbar" transform="translate(80,100)"><rect class="cbbg" x="550.5" y="0" width="51" height="271" style="fill: rgb(0, 0, 0); fill-opacity: 0; stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 0; fill-opacity: 0; stroke-width: 0;"/><g class="cbfills" transform="translate(0,10)"><rect class="cbfill" style="" x="561" y="1" width="30" height="249" fill="#050aac"/><rect class="cbfill" style="" x="561" y="1" width="30" height="224" fill="#2532c4"/><rect class="cbfill" style="" x="561" y="1" width="30" height="199" fill="#455bdc"/><rect class="cbfill" style="" x="561" y="1" width="30" height="174" fill="#6583f3"/><rect class="cbfill" style="" x="561" y="1" width="30" height="149" fill="#9faad3"/><rect class="cbfill" style="" x="561" y="1" width="30" height="124" fill="#cfb39e"/><rect class="cbfill" style="" x="561" y="1" width="30" height="99" fill="#e39968"/><rect class="cbfill" style="" x="561" y="1" width="30" height="74" fill="#d96e4a"/><rect class="cbfill" style="" x="561" y="1" width="30" height="49" fill="#c53c33"/><rect class="cbfill" style="" x="561" y="0" width="30" height="25" fill="#b20a1c"/></g><g class="cblines" transform="translate(0,10)"><path class="cbline" d="M561,225.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,200.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,175.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,150.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,125.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,100.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,75.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,50.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,25.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="cbaxis crisp" transform="translate(0,-100)"><g class="ycbb8ad2etick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,360)">0</text></g><g class="ycbb8ad2etick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,310)">4</text></g><g class="ycbb8ad2etick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,260)">8</text></g><g class="ycbb8ad2etick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,210)">12</text></g><g class="ycbb8ad2etick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,160)">16</text></g><g class="ycbb8ad2etick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,109.99999999999999)">20</text></g></g><g class="cbtitleunshift" transform="translate(-80,-100)"><g class="cbtitle"/></g><rect class="cboutline" x="561" y="10" width="30" height="250" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: none; stroke-width: 1;"/></g><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 17px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Basic Contour Plot</text></g><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="270"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="450"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="270"/></clipPath><clipPath class="contourclip" id="clip') > 0);
          assert.ok(body.indexOf('"><path d="M0,0L540,0L540,270L0,270Z"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(215,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(485,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,302.5)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,235)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,167.5)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(80,0)" d="M0,100v270" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,370)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="contourlayer mlayer"><g class="contour" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf(')" style="opacity: 1;"><g class="heatmapcoloring"/><g class="contourbg"><path d="M0,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(5, 10, 172);"/></g><g class="contourfill"><path d="M0,117Q100.76,105.64 135,94.5C157.74,87.1 173.34,81.32 189,67.5Q207.15,51.48 234,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(37, 50, 196);"/><path d="M0,167.4Q98.75,161.08 135,153.9C160.24,148.9 176.67,143.46 198,135C221.6,125.64 250.42,111.8 270,99C285.3,88.99 297.55,81.62 307.8,67.5Q320.26,50.34 334.8,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(69, 91, 220);"/><path d="M0,208.29Q56.74,204.58 81,202.5C100.83,200.8 113.2,201.42 135,197.1C170.13,190.14 237.87,169.34 270,156.6C288.81,149.14 297.24,145.44 313.2,135C336.79,119.57 380.41,86.48 394.2,67.5C401.44,57.53 401.58,50.51 405,40.5Q409.12,28.46 416.57,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(101, 131, 243);"/><path d="M0,239.14Q90.61,235.87 135,229.5C179.1,223.17 222.43,216.33 265.5,201.15C311.59,184.91 368.38,159.05 402.3,132.75C427.8,112.98 446.29,90.94 459,67.5Q470.46,46.37 478.29,0L540,0L540,270L0,270Z" style="stroke: none; fill: rgb(159, 170, 211);"/><path d="M0,270Q90.22,266.72 135,260.36C180.23,253.93 231.03,242.51 270,231.43C300.76,222.68 327,212.74 351,202.5C371.11,193.92 387.08,186.17 405,175.5C424.38,163.96 444.56,151.59 462.86,135C483.39,116.39 507.81,91.49 520.71,67.5Q532.18,46.18 540,0L540,270Z" style="stroke: none; fill: rgb(207, 179, 158);"/><path d="M234,270Q254.37,266.74 270,262.29C300.85,253.52 378.84,225.23 405,214.07C416.11,209.33 418.08,208.49 428.14,202.5C449.6,189.72 506.7,151.2 524.57,135Q532.59,127.73 540,117L540,270Z" style="stroke: none; fill: rgb(227, 153, 104);"/><path d="M334.8,270Q380.81,255.25 405,244.93C432.29,233.29 465.72,216.88 489.86,202.5Q509.25,190.95 540,167.4L540,270Z" style="stroke: none; fill: rgb(217, 110, 74);"/><path d="M416.57,270L540,208.29L540,270Z" style="stroke: none; fill: rgb(197, 60, 51);"/><path d="M478.29,270L540,239.14L540,270Z" style="stroke: none; fill: rgb(178, 10, 28);"/></g><g class="contourlines"><g class="contourlevel"><path class="openline" d="M0,117Q100.76,105.64 135,94.5C157.74,87.1 173.34,81.32 189,67.5Q207.15,51.48 234,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,167.4Q98.75,161.08 135,153.9C160.24,148.9 176.67,143.46 198,135C221.6,125.64 250.42,111.8 270,99C285.3,88.99 297.55,81.62 307.8,67.5Q320.26,50.34 334.8,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,208.29Q56.74,204.58 81,202.5C100.83,200.8 113.2,201.42 135,197.1C170.13,190.14 237.87,169.34 270,156.6C288.81,149.14 297.24,145.44 313.2,135C336.79,119.57 380.41,86.48 394.2,67.5C401.44,57.53 401.58,50.51 405,40.5Q409.12,28.46 416.57,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,239.14Q90.61,235.87 135,229.5C179.1,223.17 222.43,216.33 265.5,201.15C311.59,184.91 368.38,159.05 402.3,132.75C427.8,112.98 446.29,90.94 459,67.5Q470.46,46.37 478.29,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M0,270Q90.22,266.72 135,260.36C180.23,253.93 231.03,242.51 270,231.43C300.76,222.68 327,212.74 351,202.5C371.11,193.92 387.08,186.17 405,175.5C424.38,163.96 444.56,151.59 462.86,135C483.39,116.39 507.81,91.49 520.71,67.5Q532.18,46.18 540,0" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M234,270Q254.37,266.74 270,262.29C300.85,253.52 378.84,225.23 405,214.07C416.11,209.33 418.08,208.49 428.14,202.5C449.6,189.72 506.7,151.2 524.57,135Q532.59,127.73 540,117" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M334.8,270Q380.81,255.25 405,244.93C432.29,233.29 465.72,216.88 489.86,202.5Q509.25,190.95 540,167.4" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M416.57,270L540,208.29" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="contourlevel"><path class="openline" d="M478.29,270L540,239.14" style="stroke-miterlimit: 1; vector-effect: none; fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g></g></g></g></g></g><path class="xlines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(0, 0, 0); stroke-opacity: 0;" d=""/><path class="ylines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(0, 0, 0); stroke-opacity: 0;" d=""/><g class="overlines-above"/><g class="xaxislayer-above"><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(80,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(215,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(350,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(485,0)"/><path class="xtick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M0,371v5" transform="translate(620,0)"/><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(80,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(215,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(485,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="390.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(620,0)">4</text></g></g><g class="yaxislayer-above"><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,370)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,302.5)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,235)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,167.5)"/><path class="ytick ticks crisp" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;" d="M79,0h-5" transform="translate(0,100)"/><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,370)">0</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,302.5)">1</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,235)">2</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,167.5)">3</text></g><g class="ytick"><text text-anchor="end" x="71.6" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,100)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="cb') > 0);
          assert.ok(body.indexOf(' colorbar" transform="translate(80,100)"><rect class="cbbg" x="550.5" y="0" width="51" height="271" style="fill: rgb(0, 0, 0); fill-opacity: 0; stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 0; fill-opacity: 0; stroke-width: 0;"/><g class="cbfills" transform="translate(0,10)"><rect class="cbfill" style="" x="561" y="1" width="30" height="249" fill="#050aac"/><rect class="cbfill" style="" x="561" y="1" width="30" height="224" fill="#2532c4"/><rect class="cbfill" style="" x="561" y="1" width="30" height="199" fill="#455bdc"/><rect class="cbfill" style="" x="561" y="1" width="30" height="174" fill="#6583f3"/><rect class="cbfill" style="" x="561" y="1" width="30" height="149" fill="#9faad3"/><rect class="cbfill" style="" x="561" y="1" width="30" height="124" fill="#cfb39e"/><rect class="cbfill" style="" x="561" y="1" width="30" height="99" fill="#e39968"/><rect class="cbfill" style="" x="561" y="1" width="30" height="74" fill="#d96e4a"/><rect class="cbfill" style="" x="561" y="1" width="30" height="49" fill="#c53c33"/><rect class="cbfill" style="" x="561" y="0" width="30" height="25" fill="#b20a1c"/></g><g class="cblines" transform="translate(0,10)"><path class="cbline" d="M561,225.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,200.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,175.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,150.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,125.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,100.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,75.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,50.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/><path class="cbline" d="M561,25.25h30" style="fill: none; stroke: rgb(0, 0, 0); stroke-opacity: 1; stroke-width: 0.5px;"/></g><g class="cbaxis crisp" transform="translate(0,-100)"><g class="y') > 0);
          assert.ok(body.indexOf('tick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,360)">0</text></g><g class="y') > 0);
          assert.ok(body.indexOf('tick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,310)">4</text></g><g class="y') > 0);
          assert.ok(body.indexOf('tick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,260)">8</text></g><g class="y') > 0);
          assert.ok(body.indexOf('tick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,210)">12</text></g><g class="y') > 0);
          assert.ok(body.indexOf('tick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,160)">16</text></g><g class="y') > 0);
          assert.ok(body.indexOf('tick"><text text-anchor="start" x="594.4" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,109.99999999999999)">20</text></g></g><g class="cbtitleunshift" transform="translate(-80,-100)"><g class="cbtitle"/></g><rect class="cboutline" x="561" y="10" width="30" height="250" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: none; stroke-width: 1;"/></g><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 17px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Basic Contour Plot</text></g><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });

    // TODO: Setting X and Y Coordinates in a Contour Plot - https://plotly.com/javascript/contour-plots/#setting-x-and-y-coordinates-in-a-contour-plot
    // TODO: Colorscale for Contour Plot - https://plotly.com/javascript/contour-plots/#colorscale-for-contour-plot
    // TODO: Customizing Size and Range of a Contour Plot's Contours - https://plotly.com/javascript/contour-plots/#customizing-size-and-range-of-a-contour-plots-contours
    // TODO: etc., ...

/*
    it('request with different data', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      const payload = '{ "x": ["2013-10-04 22:23:00", "2013-11-04 22:23:00", "2013-12-04 22:23:00"], "y": [1, 3, 6], "type": "scatter" }';
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));
          assert.ok(body.indexOf('width="700"') > 0);
          assert.ok(body.indexOf('height="400"') > 0);
        });
      });
    });
    */
  });
});

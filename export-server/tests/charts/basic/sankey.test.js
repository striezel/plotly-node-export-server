/*
    Plotly.js offline image export server with Node.js test suite
    Copyright (C) 2024, 2025  Dirk Stolle

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

const assert = require('node:assert');
const http = require('node:http');
const { describe, it } = require('node:test');

describe('basic charts, part 10', () => {
  describe('sankey diagrams', () => {
    it('Basic Sankey Diagram', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/sankey-diagram/#basic-sankey-diagram example.
      const payload = `{
                         "data": [
                           {
                             "type": "sankey",
                             "orientation": "h",
                             "node": {
                               "pad": 15,
                               "thickness": 30,
                               "line": {
                                 "color": "black",
                                 "width": 0.5
                               },
                               "label": [ "A1", "A2", "B1", "B2", "C1", "C2" ],
                               "color": [ "blue", "blue", "blue", "blue", "blue", "blue" ]
                             },
                             "link": {
                               "source": [ 0, 1, 0, 2, 3, 3 ],
                               "target": [ 2, 3, 3, 4, 4, 5 ],
                               "value": [ 8, 4, 2, 8, 4, 2 ]
                             }
                           }
                         ],
                         "layout": {
                           "title": {
                             "text": "Basic Sankey"
                           },
                           "font": {
                             "size": 10
                           }
                         }
                       }`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based answer would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-36383f"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricprecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M30,1.2789769243681803e-13C142.5,1.2789769243681803e-13 142.5,4.689582056016661e-13 255,4.689582056016661e-13L255,145.71428571428618C142.5,145.71428571428618 142.5,145.71428571428584 30,145.71428571428584Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M30,197.14285714285717C142.5,197.14285714285717 142.5,197.14285714285757 255,197.14285714285757L255,270.00000000000045C142.5,270.00000000000045 142.5,270.00000000000006 30,270.00000000000006Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M30,145.71428571428586C142.5,145.71428571428586 142.5,160.71428571428612 255,160.71428571428612L255,197.14285714285757C142.5,197.14285714285757 142.5,182.1428571428573 30,182.1428571428573Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M285,4.689582056016661e-13C397.5,4.689582056016661e-13 397.5,-1.4210854715202004e-14 510,-1.4210854715202004e-14L510,145.71428571428572C397.5,145.71428571428572 397.5,145.71428571428618 285,145.71428571428618Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M285,160.71428571428612C397.5,160.71428571428612 397.5,145.71428571428567 510,145.71428571428567L510,218.57142857142856C397.5,218.57142857142856 397.5,233.571428571429 285,233.571428571429Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M285,233.57142857142898C397.5,233.57142857142898 397.5,233.57142857142858 510,233.57142857142858L510,270C397.5,270 397.5,270.0000000000004 285,270.0000000000004Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="182.14285714285705" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,94.57142857142853)">A1</text></g><g class="sankey-node" transform="translate(0.000,197.143)" style="opacity: 1;"><rect class="node-rect" width="30" height="72.8571428571428" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,39.9285714285714)">A2</text></g><g class="sankey-node" transform="translate(255.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="145.71428571428567" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,76.35714285714283)">B1</text></g><g class="sankey-node" transform="translate(255.000,160.714)" style="opacity: 1;"><rect class="node-rect" width="30" height="109.28571428571388" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,58.14285714285694)">B2</text></g><g class="sankey-node" transform="translate(510.000,-0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="218.5714285714286" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,112.7857142857143)">C1</text></g><g class="sankey-node" transform="translate(510.000,233.571)" style="opacity: 1;"><rect class="node-rect" width="30" height="36.428571428571416" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,21.714285714285708)">C2</text></g></g></g><defs id="topdefs-36383f"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Basic Sankey</text></g><g class="first-render"/></g></svg>

          // Current server response is visually the same.
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-911250"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M30,1.2789769243681803e-13C142.5,1.2789769243681803e-13 142.5,4.689582056016661e-13 255,4.689582056016661e-13L255,145.71428571428618C142.5,145.71428571428618 142.5,145.71428571428584 30,145.71428571428584Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M30,197.14285714285717C142.5,197.14285714285717 142.5,197.14285714285757 255,197.14285714285757L255,270.00000000000045C142.5,270.00000000000045 142.5,270.00000000000006 30,270.00000000000006Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M30,145.71428571428586C142.5,145.71428571428586 142.5,160.71428571428612 255,160.71428571428612L255,197.14285714285757C142.5,197.14285714285757 142.5,182.1428571428573 30,182.1428571428573Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M285,4.689582056016661e-13C397.5,4.689582056016661e-13 397.5,-1.4210854715202004e-14 510,-1.4210854715202004e-14L510,145.71428571428572C397.5,145.71428571428572 397.5,145.71428571428618 285,145.71428571428618Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M285,160.71428571428612C397.5,160.71428571428612 397.5,145.71428571428567 510,145.71428571428567L510,218.57142857142856C397.5,218.57142857142856 397.5,233.571428571429 285,233.571428571429Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M285,233.57142857142898C397.5,233.57142857142898 397.5,233.57142857142858 510,233.57142857142858L510,270C397.5,270 397.5,270.0000000000004 285,270.0000000000004Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="182.14285714285705" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,94.57142857142853)">A1</text></g><g class="sankey-node" transform="translate(0.000,197.143)" style="opacity: 1;"><rect class="node-rect" width="30" height="72.8571428571428" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,39.9285714285714)">A2</text></g><g class="sankey-node" transform="translate(255.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="145.71428571428567" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,76.35714285714283)">B1</text></g><g class="sankey-node" transform="translate(255.000,160.714)" style="opacity: 1;"><rect class="node-rect" width="30" height="109.28571428571388" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,58.14285714285694)">B2</text></g><g class="sankey-node" transform="translate(510.000,-0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="218.5714285714286" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,112.7857142857143)">C1</text></g><g class="sankey-node" transform="translate(510.000,233.571)" style="opacity: 1;"><rect class="node-rect" width="30" height="36.428571428571416" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,21.714285714285708)">C2</text></g></g></g><defs id="topdefs-911250"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Basic Sankey</text></g><g class="first-render"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs') >= 0);
          assert.ok(body.indexOf('<g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M30,1.2789769243681803e-13C142.5,1.2789769243681803e-13 142.5,4.689582056016661e-13 255,4.689582056016661e-13L255,145.71428571428618C142.5,145.71428571428618 142.5,145.71428571428584 30,145.71428571428584Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M30,197.14285714285717C142.5,197.14285714285717 142.5,197.14285714285757 255,197.14285714285757L255,270.00000000000045C142.5,270.00000000000045 142.5,270.00000000000006 30,270.00000000000006Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M30,145.71428571428586C142.5,145.71428571428586 142.5,160.71428571428612 255,160.71428571428612L255,197.14285714285757C142.5,197.14285714285757 142.5,182.1428571428573 30,182.1428571428573Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M285,4.689582056016661e-13C397.5,4.689582056016661e-13 397.5,-1.4210854715202004e-14 510,-1.4210854715202004e-14L510,145.71428571428572C397.5,145.71428571428572 397.5,145.71428571428618 285,145.71428571428618Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M285,160.71428571428612C397.5,160.71428571428612 397.5,145.71428571428567 510,145.71428571428567L510,218.57142857142856C397.5,218.57142857142856 397.5,233.571428571429 285,233.571428571429Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M285,233.57142857142898C397.5,233.57142857142898 397.5,233.57142857142858 510,233.57142857142858L510,270C397.5,270 397.5,270.0000000000004 285,270.0000000000004Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="182.14285714285705" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,94.57142857142853)">A1</text></g>') > 0);
          assert.ok(body.indexOf('<g class="sankey-node" transform="translate(0.000,197.143)" style="opacity: 1;"><rect class="node-rect" width="30" height="72.8571428571428" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,39.9285714285714)">A2</text></g><g class="sankey-node" transform="translate(255.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="145.71428571428567" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,76.35714285714283)">B1</text></g><g class="sankey-node" transform="translate(255.000,160.714)" style="opacity: 1;"><rect class="node-rect" width="30" height="109.28571428571388" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(33.25,58.14285714285694)">B2</text></g><g class="sankey-node" transform="translate(510.000,-0.000)" style="opacity: 1;"><rect class="node-rect" width="30" height="218.5714285714286" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,112.7857142857143)">C1</text></g><g class="sankey-node" transform="translate(510.000,233.571)" style="opacity: 1;"><rect class="node-rect" width="30" height="36.428571428571416" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(0, 0, 255); fill-opacity: 1;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,21.714285714285708)">C2</text></g></g></g><defs id="topdefs') > 0);
          assert.ok(body.indexOf('<g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Basic Sankey</text></g><g class="first-render"/></g></svg>') > 0);
        });
      });
    });

    it('Style Sankey Diagram', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/sankey-diagram/#style-sankey-diagram example.
      const payload = `{
                         "data": [
                           {
                             "type": "sankey",
                             "domain": {
                               "x": [ 0, 1 ],
                               "y": [ 0, 1 ]
                             },
                             "orientation": "h",
                             "valueformat": ".0f",
                             "valuesuffix": "TWh",
                             "node": {
                               "pad": 15,
                               "thickness": 15,
                               "line": {
                                 "color": "black",
                                 "width": 0.5
                               },
                               "label": [
                                 "Agricultural 'waste'", "Bio-conversion", "Liquid", "Losses", "Solid", "Gas",
                                 "Biofuel imports", "Biomass imports", "Coal imports", "Coal", "Coal reserves",
                                 "District heating", "Industry", "Heating and cooling - commercial",
                                 "Heating and cooling - homes", "Electricity grid", "Over generation / exports",
                                 "H2 conversion", "Road transport", "Agriculture", "Rail transport",
                                 "Lighting & appliances - commercial", "Lighting & appliances - homes", "Gas imports", "Ngas",
                                 "Gas reserves", "Thermal generation", "Geothermal", "H2", "Hydro", "International shipping",
                                 "Domestic aviation", "International aviation", "National navigation", "Marine algae",
                                 "Nuclear", "Oil imports", "Oil", "Oil reserves", "Other waste", "Pumped heat", "Solar PV",
                                 "Solar Thermal", "Solar", "Tidal", "UK land based bioenergy", "Wave", "Wind"
                               ]
                             },
                             "link": {
                               "source": [
                                 0, 1, 1, 1, 1, 6, 7, 8, 10, 9, 11, 11, 11, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 23,
                                 25, 5, 5, 5, 5, 5, 27, 17, 17, 28, 29, 2, 2, 2, 2, 2, 2, 2, 2, 34, 24, 35, 35, 36, 38, 37,
                                 39, 39, 40, 40, 41, 42, 43, 43, 4, 4, 4, 26, 26, 26, 44, 45, 46, 47
                               ],
                               "target": [
                                 1, 2, 3, 4, 5, 2, 4, 9, 9, 4, 12, 13, 14, 16, 14, 17, 12, 18, 19, 13, 3, 20, 21, 22, 24, 24,
                                 13, 3, 26, 19, 12, 15, 28, 3, 18, 15, 12, 30, 18, 31, 32, 19, 33, 20, 1, 5, 26, 26, 37, 37,
                                 2, 4, 1, 14, 13, 15, 14, 42, 41, 19, 26, 12, 15, 3, 11, 15, 1, 15, 15
                               ],
                               "value": [
                                 124.729, 0.597, 26.862, 280.322, 81.144, 35, 35, 11.606, 63.965, 75.571, 10.639, 22.505,
                                 46.184, 104.453, 113.726, 27.14, 342.165, 37.797, 4.412, 40.858, 56.691, 7.863, 90.008,
                                 93.494, 40.719, 82.233, 0.129, 1.401, 151.891, 2.096, 48.58, 7.013, 20.897, 6.242, 20.897,
                                 6.995, 121.066, 128.69, 135.835, 14.458, 206.267, 3.64, 33.218, 4.413, 14.375, 122.952, 500,
                                 339.978, 504.287, 107.703, 611.99, 56.587, 77.81, 193.026, 70.672, 59.901, 19.263, 19.263,
                                 59.901, 0.882, 400.12, 46.477, 525.531, 787.129, 79.329, 9.452, 182.01, 19.013, 289.366
                               ],
                               "label": [
                                 "stream 1", "", "", "", "stream 1", "", "", "", "", "", "", "", "", "", "", "", "", "", "",
                                 "", "", "", "", "", "", "", "", "", "", "", "stream 1", "", "", "", "", "", "", "", "", "",
                                 "", "", "", "", "", "", "Old generation plant (made-up)", "New generation plant (made-up)",
                                 "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", ""
                               ]
                             }
                           }
                         ],
                         "layout": {
                           "title": {
                             "text": "Energy forecast for 2050<br>Source: Department of Energy & Climate Change, Tom Counsell via <a href='https://bost.ocks.org/mike/sankey/'>Mike Bostock</a>"
                           },
                           "width": 1118,
                           "height": 772,
                           "font": {
                             "size": 10,
                             "color": "white"
                           },
                           "plot_bgcolor": "black",
                           "paper_bgcolor": "black"
                         }
                       }`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based answer would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1118" height="772" style="" viewBox="0 0 1118 772"><rect x="0" y="0" width="1118" height="772" style="fill: rgb(0, 0, 0); fill-opacity: 1;"/><defs id="defs-be7d19"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricprecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,140.0606818739104C74.85714285714286,140.0606818739104 74.85714285714286,151.81371964122417 134.71428571428572,151.81371964122417L134.71428571428572,165.2461266650355C74.85714285714286,165.2461266650355 74.85714285714286,153.49308889772172 15,153.49308889772172Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M149.71428571428572,174.03266914245245C209.57142857142858,174.03266914245245 209.57142857142858,474.6705397510404 269.42857142857144,474.6705397510404L269.42857142857144,474.73483231326105C209.57142857142858,474.73483231326105 209.57142857142858,174.09696170467305 149.71428571428572,174.09696170467305Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,132.21256511898878C546.3571428571429,132.21256511898878 546.3571428571429,175.70123159094527 943,175.70123159094527L943,178.59407381267096C546.3571428571429,178.59407381267096 546.3571428571429,135.10540734071446 149.71428571428572,135.10540734071446Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,135.10540734071444C209.57142857142858,135.10540734071444 209.57142857142858,154.4091379015116 269.42857142857144,154.4091379015116L269.42857142857144,184.5977804924795C209.57142857142858,184.5977804924795 209.57142857142858,165.29404993168234 149.71428571428572,165.29404993168234Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,165.29404993168234C209.57142857142858,165.29404993168234 209.57142857142858,217.59948252878422 269.42857142857144,217.59948252878422L269.42857142857144,226.33810173955436C209.57142857142858,226.33810173955436 209.57142857142858,174.03266914245248 149.71428571428572,174.03266914245248Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,588.230754308674C142.21428571428572,588.230754308674 142.21428571428572,540.641708617106 269.42857142857144,540.641708617106L269.42857142857144,544.410954308432C142.21428571428572,544.410954308432 142.21428571428572,592 15,592Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,236.403318058739C142.21428571428572,236.403318058739 142.21428571428572,198.83023683745824 269.42857142857144,198.83023683745824L269.42857142857144,202.59948252878422C142.21428571428572,202.59948252878422 142.21428571428572,240.17256375006497 15,240.17256375006497Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,255.17256375006497C74.85714285714286,255.17256375006497 74.85714285714286,223.26110503298858 134.71428571428572,223.26110503298858L134.71428571428572,224.51098690423228C74.85714285714286,224.51098690423228 74.85714285714286,256.42244562130867 15,256.42244562130867Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,214.5147523260057C74.85714285714286,214.5147523260057 74.85714285714286,216.37253930025528 134.71428571428572,216.37253930025528L134.71428571428572,223.26110503298858C74.85714285714286,223.26110503298858 74.85714285714286,221.403318058739 15,221.403318058739Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,216.37253930025528C209.57142857142858,216.37253930025528 209.57142857142858,190.69178923348127 269.42857142857144,190.69178923348127L269.42857142857144,198.83023683745827C209.57142857142858,198.83023683745827 209.57142857142858,224.51098690423228 149.71428571428572,224.51098690423228Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,308.5695880930084C748.4285714285714,308.5695880930084 748.4285714285714,323.6186719556552 943,323.6186719556552L943,324.7644149530842C748.4285714285714,324.7644149530842 748.4285714285714,309.7153310904374 553.8571428571429,309.7153310904374Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,309.7153310904375C748.4285714285714,309.7153310904375 748.4285714285714,373.4041964385634 943,373.4041964385634L943,375.82782141808605C748.4285714285714,375.82782141808605 748.4285714285714,312.1389560699601 553.8571428571429,312.1389560699601Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,312.13895606996005C748.4285714285714,312.13895606996005 748.4285714285714,410.6861461892039 943,410.6861461892039L943,415.6598274180095C748.4285714285714,415.6598274180095 748.4285714285714,317.11263729876566 553.8571428571429,317.11263729876566Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,200.74749754201102C748.4285714285714,200.74749754201102 748.4285714285714,200.52237816426415 943,200.52237816426415L943,211.7712073127233C748.4285714285714,211.7712073127233 748.4285714285714,211.99632669047017 553.8571428571429,211.99632669047017Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,276.40487398564613C748.4285714285714,276.40487398564613 748.4285714285714,398.43868231801144 943,398.43868231801144L943,410.68614618920395C748.4285714285714,410.68614618920395 748.4285714285714,288.65233785683864 553.8571428571429,288.65233785683864Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,231.7581587718901C613.7142857142858,231.7581587718901 613.7142857142858,274.4421100708107 673.5714285714287,274.4421100708107L673.5714285714287,277.36489087259895C613.7142857142858,277.36489087259895 613.7142857142858,234.68093957367827 553.8571428571429,234.68093957367827Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,234.68093957367827C748.4285714285714,234.68093957367827 748.4285714285714,281.5382745940219 943,281.5382745940219L943,318.38695893609474C748.4285714285714,318.38695893609474 748.4285714285714,271.5296239157511 553.8571428571429,271.5296239157511Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,289.49912582457847C748.4285714285714,289.49912582457847 748.4285714285714,469.8438462372272 943,469.8438462372272L943,473.91430850565706C748.4285714285714,473.91430850565706 748.4285714285714,293.56958809300835 553.8571428571429,293.56958809300835Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M553.8571428571429,271.5296239157511C748.4285714285714,271.5296239157511 748.4285714285714,352.89732848353617 943,352.89732848353617L943,353.37246882611134C748.4285714285714,353.37246882611134 748.4285714285714,272.00476425832625 553.8571428571429,272.00476425832625Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,272.00476425832625C748.4285714285714,272.00476425832625 748.4285714285714,368.9901943485526 943,368.9901943485526L943,373.3903040758725C748.4285714285714,373.3903040758725 748.4285714285714,276.40487398564613 553.8571428571429,276.40487398564613Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,194.6422887566693C748.4285714285714,194.6422887566693 748.4285714285714,178.59407381267093 943,178.59407381267093L943,184.69928259801267C748.4285714285714,184.69928259801267 748.4285714285714,200.74749754201105 553.8571428571429,200.74749754201105Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M553.8571428571429,288.6523378568386C748.4285714285714,288.6523378568386 748.4285714285714,453.5218102341781 943,453.5218102341781L943,454.368598201918C748.4285714285714,454.368598201918 748.4285714285714,289.4991258245785 553.8571428571429,289.4991258245785Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,211.9963266904702C748.4285714285714,211.9963266904702 748.4285714285714,226.7712073127233 943,226.7712073127233L943,236.46441491800525C748.4285714285714,236.46441491800525 748.4285714285714,221.68953429575214 553.8571428571429,221.68953429575214Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M553.8571428571429,221.6895342957521C748.4285714285714,221.6895342957521 748.4285714285714,251.46441491800522 943,251.46441491800522L943,261.5330393941432C748.4285714285714,261.5330393941432 748.4285714285714,231.7581587718901 553.8571428571429,231.7581587718901Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,295.278342219446C74.85714285714286,295.278342219446 74.85714285714286,268.66527388048854 134.71428571428572,268.66527388048854L134.71428571428572,273.0504143177772C74.85714285714286,273.0504143177772 74.85714285714286,299.6634826567347 15,299.6634826567347Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,271.42244562130867C74.85714285714286,271.42244562130867 74.85714285714286,259.8093772823512 134.71428571428572,259.8093772823512L134.71428571428572,268.6652738804886C74.85714285714286,268.6652738804886 74.85714285714286,280.2783422194461 15,280.2783422194461Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M284.42857142857144,239.5653541050235C613.7142857142858,239.5653541050235 613.7142857142858,373.3903040758725 943,373.3903040758725L943,373.40419643856336C613.7142857142858,373.40419643856336 613.7142857142858,239.5792464677144 284.42857142857144,239.5792464677144Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M284.42857142857144,233.95703959453257C613.7142857142858,233.95703959453257 613.7142857142858,184.69928259801264 943,184.69928259801264L943,184.85016011839974C613.7142857142858,184.85016011839974 613.7142857142858,234.10791711491967 284.42857142857144,234.10791711491967Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,217.59948252878422C344.28571428571433,217.59948252878422 344.28571428571433,190.19649116206278 404.14285714285717,190.19649116206278L404.14285714285717,206.5540482278111C344.28571428571433,206.5540482278111 344.28571428571433,233.95703959453255 284.42857142857144,233.95703959453255Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M284.42857142857144,239.33963013448007C613.7142857142858,239.33963013448007 613.7142857142858,353.37246882611134 943,353.37246882611134L943,353.59819279665476C613.7142857142858,353.59819279665476 613.7142857142858,239.5653541050235 284.42857142857144,239.5653541050235Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,234.10791711491964C613.7142857142858,234.10791711491964 613.7142857142858,318.38695893609474 943,318.38695893609474L943,323.61867195565515C613.7142857142858,323.61867195565515 613.7142857142858,239.3396301344801 284.42857142857144,239.3396301344801Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M15,360.82609833434117C276.92857142857144,360.82609833434117 276.92857142857144,282.4007746459394 538.8571428571429,282.4007746459394L538.8571428571429,283.15602378974705C276.92857142857144,283.15602378974705 276.92857142857144,361.5813474781488 15,361.5813474781488Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M688.5714285714287,275.1143281166752C748.4285714285716,275.1143281166752 748.4285714285716,332.4766057725319 808.2857142857143,332.4766057725319L808.2857142857143,334.72706083572155C748.4285714285716,334.72706083572155 748.4285714285716,277.36478317986484 688.5714285714287,277.36478317986484Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M688.5714285714287,274.4421100708107C815.7857142857143,274.4421100708107 815.7857142857143,184.8501601183997 943,184.8501601183997L943,185.5223781642642C815.7857142857143,185.5223781642642 815.7857142857143,275.1143281166752 688.5714285714287,275.1143281166752Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M823.2857142857143,332.4766057725319C883.1428571428571,332.4766057725319 883.1428571428571,473.9143085056571 943,473.9143085056571L943,476.16476356884675C883.1428571428571,476.16476356884675 883.1428571428571,334.72706083572155 823.2857142857143,334.72706083572155Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M15,393.6289094304111C276.92857142857144,393.6289094304111 276.92857142857144,291.65448820361274 538.8571428571429,291.65448820361274L538.8571428571429,292.40779887820776C276.92857142857144,292.40779887820776 276.92857142857144,394.3822201050061 15,394.3822201050061Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,474.6705397510404C613.7142857142858,474.6705397510404 613.7142857142858,324.76441495308427 943,324.76441495308427L943,337.8023434921148C613.7142857142858,337.8023434921148 613.7142857142858,487.7084682900709 284.42857142857144,487.7084682900709Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,525.4176175771065C613.7142857142858,525.4176175771065 613.7142857142858,543.0066632686744 943,543.0066632686744L943,556.8656412120097C613.7142857142858,556.8656412120097 613.7142857142858,539.2765955204418 284.42857142857144,539.2765955204418Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,488.575717877278C613.7142857142858,488.575717877278 613.7142857142858,476.1647635688468 943,476.1647635688468L943,490.7932060968829C613.7142857142858,490.7932060968829 613.7142857142858,503.2041604053141 284.42857142857144,503.2041604053141Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,542.8539327597124C613.7142857142858,542.8539327597124 613.7142857142858,590.4429784512802 943,590.4429784512802L943,592C613.7142857142858,592 613.7142857142858,544.4109543084322 284.42857142857144,544.4109543084322Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,503.2041604053141C613.7142857142858,503.2041604053141 613.7142857142858,505.793206096883 943,505.793206096883L943,528.0066632686754C613.7142857142858,528.0066632686754 613.7142857142858,525.4176175771065 284.42857142857144,525.4176175771065Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M284.42857142857144,487.7084682900709C613.7142857142858,487.7084682900709 613.7142857142858,353.59819279665476 943,353.59819279665476L943,353.9901943485527C613.7142857142858,353.9901943485527 613.7142857142858,488.10046984196885 284.42857142857144,488.10046984196885Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,539.2765955204419C613.7142857142858,539.2765955204419 613.7142857142858,571.8656412120099 943,571.8656412120099L943,575.4429784512804C613.7142857142858,575.4429784512804 613.7142857142858,542.8539327597124 284.42857142857144,542.8539327597124Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M284.42857142857144,488.10046984196885C613.7142857142858,488.10046984196885 613.7142857142858,454.36859820191796 943,454.36859820191796L943,454.8438462372271C613.7142857142858,454.8438462372271 613.7142857142858,488.575717877278 284.42857142857144,488.575717877278Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,197.96666927421109C74.85714285714286,197.96666927421109 74.85714285714286,173.6256983005233 134.71428571428572,173.6256983005233L134.71428571428572,175.17378135231792C74.85714285714286,175.17378135231792 74.85714285714286,199.5147523260057 15,199.5147523260057Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,259.8093772823512C209.57142857142858,259.8093772823512 209.57142857142858,226.33810173955433 269.42857142857144,226.33810173955433L269.42857142857144,239.57913877498035C209.57142857142858,239.57913877498035 209.57142857142858,273.05041431777715 149.71428571428572,273.05041431777715Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,8.668621376273222e-13C209.57142857142858,8.668621376273222e-13 209.57142857142858,56.64694706715008 404.14285714285717,56.64694706715008L404.14285714285717,110.49331408609243C209.57142857142858,110.49331408609243 209.57142857142858,53.846367018943205 15,53.846367018943205Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,53.84636701894321C209.57142857142858,53.84636701894321 209.57142857142858,110.49331408609244 404.14285714285717,110.49331408609244L404.14285714285717,147.1064744188244C209.57142857142858,147.1064744188244 209.57142857142858,90.45952735167516 15,90.45952735167516Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,492.3238780048295C74.85714285714286,492.3238780048295 74.85714285714286,484.70318224530104 134.71428571428572,484.70318224530104L134.71428571428572,539.0112280150638C74.85714285714286,539.0112280150638 74.85714285714286,546.6319237745922 15,546.6319237745922Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,561.6319237745915C74.85714285714286,561.6319237745915 74.85714285714286,539.0112280150638 134.71428571428572,539.0112280150638L134.71428571428572,550.6100585491461C74.85714285714286,550.6100585491461 74.85714285714286,573.2307543086738 15,573.2307543086738Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,484.7031822453011C209.57142857142858,484.7031822453011 209.57142857142858,474.734832313261 269.42857142857144,474.734832313261L269.42857142857144,540.641708617106C209.57142857142858,540.641708617106 209.57142857142858,550.6100585491462 149.71428571428572,550.6100585491462Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,176.87266053320934C142.21428571428572,176.87266053320934 142.21428571428572,184.5977804924795 269.42857142857144,184.5977804924795L269.42857142857144,190.6917892334813C142.21428571428572,190.6917892334813 142.21428571428572,182.96666927421114 15,182.96666927421114Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,168.49308889772155C74.85714285714286,168.49308889772155 74.85714285714286,165.2461266650355 134.71428571428572,165.2461266650355L134.71428571428572,173.6256983005233C74.85714285714286,173.6256983005233 74.85714285714286,176.87266053320937 15,176.87266053320937Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,456.53638032443286C479,456.53638032443286 479,417.73431255378136 943,417.73431255378136L943,438.52181023417813C479,438.52181023417813 479,477.3238780048296 15,477.3238780048296Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,448.92551942450746C479,448.92551942450746 479,375.827821418086 943,375.827821418086L943,383.43868231801133C479,383.43868231801133 479,456.5363803244328 15,456.5363803244328Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,383.30778088946676C344.28571428571433,383.30778088946676 344.28571428571433,285.2035857420094 538.8571428571429,285.2035857420094L538.8571428571429,291.6544882036127C344.28571428571433,291.6544882036127 344.28571428571433,389.75868335107003 149.71428571428572,389.75868335107003Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M149.71428571428572,425.46572357255775C546.3571428571429,425.46572357255775 546.3571428571429,415.65982741800957 943,415.65982741800957L943,417.7343125537813C546.3571428571429,417.7343125537813 546.3571428571429,427.5402087083295 149.71428571428572,427.5402087083295Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,431.85103428873566C74.85714285714286,431.85103428873566 74.85714285714286,425.46572357255775 134.71428571428572,425.46572357255775L134.71428571428572,427.5402087083295C74.85714285714286,427.5402087083295 74.85714285714286,433.9255194245074 15,433.9255194245074Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,425.4001318271323C74.85714285714286,425.4001318271323 74.85714285714286,383.30778088946676 134.71428571428572,383.30778088946676L134.71428571428572,389.75868335107003C74.85714285714286,389.75868335107003 74.85714285714286,431.8510342887356 15,431.8510342887356Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1px; opacity: 1;" d="M284.42857142857144,202.50438984462878C613.7142857142858,202.50438984462878 613.7142857142858,352.80234349211474 943,352.80234349211474L943,352.8973284835361C613.7142857142858,352.8973284835361 613.7142857142858,202.5993748360502 284.42857142857144,202.5993748360502Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,154.4091379015116C344.28571428571433,154.4091379015116 344.28571428571433,147.10647441882438 404.14285714285717,147.10647441882438L404.14285714285717,190.1964911620628C344.28571428571433,190.1964911620628 344.28571428571433,197.49915464475004 284.42857142857144,197.49915464475004Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M284.42857142857144,197.49915464475C613.7142857142858,197.49915464475 613.7142857142858,276.53303939414315 943,276.53303939414315L943,281.53827459402186C613.7142857142858,281.53827459402186 613.7142857142858,202.50438984462878 284.42857142857144,202.50438984462878Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M419.14285714285717,141.4150211176562C479,141.4150211176562 479,194.6422887566693 538.8571428571429,194.6422887566693L538.8571428571429,251.23815896833287C479,251.23815896833287 479,198.01089132931978 419.14285714285717,198.01089132931978Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M419.14285714285717,56.64694706715008C681.0714285714286,56.64694706715008 681.0714285714286,90.93315754043914 943,90.93315754043914L943,175.70123159094527C681.0714285714286,175.70123159094527 681.0714285714286,141.4150211176562 419.14285714285717,141.4150211176562Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M419.14285714285717,198.01089132931978C479,198.01089132931978 479,308.5695880930084 538.8571428571429,308.5695880930084L538.8571428571429,317.11274499149977C479,317.11274499149977 479,206.55404822781114 419.14285714285717,206.55404822781114Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,409.3822201050061C276.92857142857144,409.3822201050061 276.92857142857144,292.40779887820776 538.8571428571429,292.40779887820776L538.8571428571429,293.42571060033384C276.92857142857144,293.42571060033384 276.92857142857144,410.4001318271322 15,410.4001318271322Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,105.45952735167518C74.85714285714286,105.45952735167518 74.85714285714286,132.21256511898878 134.71428571428572,132.21256511898878L134.71428571428572,151.81371964122417C74.85714285714286,151.81371964122417 74.85714285714286,125.06068187391057 15,125.06068187391057Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,376.5813474781488C276.92857142857144,376.5813474781488 276.92857142857144,283.1560237897471 538.8571428571429,283.1560237897471L538.8571428571429,285.2035857420094C276.92857142857144,285.2035857420094 276.92857142857144,378.6289094304111 15,378.6289094304111Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0px; opacity: 1;" d="M15,314.6634826567346C276.92857142857144,314.6634826567346 276.92857142857144,251.23815896833284 538.8571428571429,251.23815896833284L538.8571428571429,282.40077464593935C276.92857142857144,282.40077464593935 276.92857142857144,345.82609833434105 15,345.82609833434105Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,140.061)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.432407023811152" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.216203511905576)">Agricultural 'waste'</text></g><g class="sankey-node" transform="translate(134.714,132.213)" style="opacity: 1;"><rect class="node-rect" width="15" height="42.96121623332897" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,24.980608116664484)">Bio-conversion</text></g><g class="sankey-node" transform="translate(269.429,474.671)" style="opacity: 1;"><rect class="node-rect" width="15" height="69.74041455739172" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,38.37020727869586)">Liquid</text></g><g class="sankey-node" transform="translate(943.000,90.933)" style="opacity: 1;"><rect class="node-rect" width="15" height="94.58922062382501" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,50.79461031191251)">Losses</text></g><g class="sankey-node" transform="translate(269.429,154.409)" style="opacity: 1;"><rect class="node-rect" width="15" height="48.19034462727262" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,27.59517231363631)">Solid</text></g><g class="sankey-node" transform="translate(269.429,217.599)" style="opacity: 1;"><rect class="node-rect" width="15" height="21.97976393893026" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,14.48988196946513)">Gas</text></g><g class="sankey-node" transform="translate(0.000,588.231)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.7692456913259775" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.384622845662989)">Biofuel imports</text></g><g class="sankey-node" transform="translate(0.000,236.403)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.7692456913259775" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.384622845662989)">Biomass imports</text></g><g class="sankey-node" transform="translate(0.000,255.173)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.2498818712437014" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.124940935621851)">Coal imports</text></g><g class="sankey-node" transform="translate(134.714,216.373)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.138447603976942" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.569223801988471)">Coal</text></g><g class="sankey-node" transform="translate(0.000,214.515)" style="opacity: 1;"><rect class="node-rect" width="15" height="6.888565732733298" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,6.944282866366649)">Coal reserves</text></g><g class="sankey-node" transform="translate(538.857,308.570)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.543156898491361" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.7715784492456805)">District heating</text></g><g class="sankey-node" transform="translate(943.000,276.533)" style="opacity: 1;"><rect class="node-rect" width="15" height="61.2693040979716" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,34.1346520489858)">Industry</text></g><g class="sankey-node" transform="translate(943.000,368.990)" style="opacity: 1;"><rect class="node-rect" width="15" height="14.448487969458824" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,10.724243984729412)">Heating and cooling - commercial</text></g><g class="sankey-node" transform="translate(943.000,398.439)" style="opacity: 1;"><rect class="node-rect" width="15" height="40.08312791616663" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,23.541563958083316)">Heating and cooling - homes</text></g><g class="sankey-node" transform="translate(538.857,194.642)" style="opacity: 1;"><rect class="node-rect" width="15" height="98.9272993363391" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,52.96364966816955)">Electricity grid</text></g><g class="sankey-node" transform="translate(943.000,200.522)" style="opacity: 1;"><rect class="node-rect" width="15" height="11.248829148459151" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,9.124414574229576)">Over generation / exports</text></g><g class="sankey-node" transform="translate(673.571,274.442)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.9227808017881216" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.961390400894061)">H2 conversion</text></g><g class="sankey-node" transform="translate(943.000,469.844)" style="opacity: 1;"><rect class="node-rect" width="15" height="20.94935985965577" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,13.974679929827886)">Road transport</text></g><g class="sankey-node" transform="translate(943.000,352.802)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.1878508564378762" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.093925428218938)">Agriculture</text></g><g class="sankey-node" transform="translate(943.000,453.522)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.3220360030491065" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.161018001524553)">Rail transport</text></g><g class="sankey-node" transform="translate(943.000,226.771)" style="opacity: 1;"><rect class="node-rect" width="15" height="9.693207605281913" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,8.346603802640956)">Lighting &amp; appliances - commercial</text></g><g class="sankey-node" transform="translate(943.000,251.464)" style="opacity: 1;"><rect class="node-rect" width="15" height="10.068624476137927" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,8.534312238068964)">Lighting &amp; appliances - homes</text></g><g class="sankey-node" transform="translate(0.000,295.278)" style="opacity: 1;"><rect class="node-rect" width="15" height="4.385140437288555" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.692570218644278)">Gas imports</text></g><g class="sankey-node" transform="translate(134.714,259.809)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.241037035426075" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.120518517713037)">Ngas</text></g><g class="sankey-node" transform="translate(0.000,271.422)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.855896598137349" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.9279482990686745)">Gas reserves</text></g><g class="sankey-node" transform="translate(404.143,56.647)" style="opacity: 1;"><rect class="node-rect" width="15" height="149.9071011606609" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,78.45355058033044)">Thermal generation</text></g><g class="sankey-node" transform="translate(0.000,360.826)" style="opacity: 1;"><rect class="node-rect" width="15" height="0.7552491438076459" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,3.877624571903823)">Geothermal</text></g><g class="sankey-node" transform="translate(808.286,332.477)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.25045506318952" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.62522753159476)">H2</text></g><g class="sankey-node" transform="translate(0.000,393.629)" style="opacity: 1;"><rect class="node-rect" width="15" height="0.7533106745950136" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,3.8766553372975068)">Hydro</text></g><g class="sankey-node" transform="translate(943.000,543.007)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.858977943335503" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,10.429488971667752)">International shipping</text></g><g class="sankey-node" transform="translate(943.000,590.443)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.5570215487198311" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.278510774359916)">Domestic aviation</text></g><g class="sankey-node" transform="translate(943.000,505.793)" style="opacity: 1;"><rect class="node-rect" width="15" height="22.213457171791447" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,14.606728585895723)">International aviation</text></g><g class="sankey-node" transform="translate(943.000,571.866)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.577337239270264" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,5.288668619635132)">National navigation</text></g><g class="sankey-node" transform="translate(0.000,197.967)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.548083051794606" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.274041525897303)">Marine algae</text></g><g class="sankey-node" transform="translate(0.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="15" height="90.45952735167431" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,48.729763675837155)">Nuclear</text></g><g class="sankey-node" transform="translate(0.000,492.324)" style="opacity: 1;"><rect class="node-rect" width="15" height="54.308045769761975" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,30.654022884880987)">Oil imports</text></g><g class="sankey-node" transform="translate(134.714,484.703)" style="opacity: 1;"><rect class="node-rect" width="15" height="65.90687630384537" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,36.45343815192268)">Oil</text></g><g class="sankey-node" transform="translate(0.000,561.632)" style="opacity: 1;"><rect class="node-rect" width="15" height="11.59883053408248" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,9.29941526704124)">Oil reserves</text></g><g class="sankey-node" transform="translate(0.000,168.493)" style="opacity: 1;"><rect class="node-rect" width="15" height="14.473580376489537" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.736790188244768)">Other waste</text></g><g class="sankey-node" transform="translate(0.000,448.926)" style="opacity: 1;"><rect class="node-rect" width="15" height="28.39835858032211" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,17.699179290161055)">Pumped heat</text></g><g class="sankey-node" transform="translate(134.714,383.308)" style="opacity: 1;"><rect class="node-rect" width="15" height="6.4509024616032775" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,6.725451230801639)">Solar PV</text></g><g class="sankey-node" transform="translate(134.714,425.466)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.0744851357718517" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.537242567885926)">Solar Thermal</text></g><g class="sankey-node" transform="translate(0.000,425.400)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.52538759737513" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.762693798687565)">Solar</text></g><g class="sankey-node" transform="translate(0.000,409.382)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.0179117221262004" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.0089558610631)">Tidal</text></g><g class="sankey-node" transform="translate(0.000,105.460)" style="opacity: 1;"><rect class="node-rect" width="15" height="19.60115452223522" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,13.30057726111761)">UK land based bioenergy</text></g><g class="sankey-node" transform="translate(0.000,376.581)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.047561952262299" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.52378097613115)">Wave</text></g><g class="sankey-node" transform="translate(0.000,314.663)" style="opacity: 1;"><rect class="node-rect" width="15" height="31.162615677606595" style="stroke-width: 0.5px; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: rgb(68, 68, 68) 1px 1px 1px, rgb(68, 68, 68) -1px -1px 1px, rgb(68, 68, 68) 1px -1px 1px, rgb(68, 68, 68) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,19.081307838803298)">Wind</text></g></g></g><defs id="topdefs-be7d19"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 14px; fill: rgb(255, 255, 255); fill-opacity: 1; white-space: pre; pointer-events: all;" x="559" y="50" text-anchor="middle" dy="0em"><tspan class="line" dy="0em" x="559" y="50">Energy forecast for 2050</tspan><tspan class="line" dy="1.3em" x="559" y="50">Source: Department of Energy &amp; Climate Change, Tom Counsell via <a xlink:show="new" target="_blank" xlink:href="https://bost.ocks.org/mike/sankey/" style="cursor:pointer">Mike Bostock</a></tspan></text></g><g class="first-render"/></g></svg>

          // Current server response is visually the same.
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1118" height="772" style="" viewBox="0 0 1118 772"><rect x="0" y="0" width="1118" height="772" style="fill: rgb(0, 0, 0); fill-opacity: 1;"/><defs id="defs-1c2d54"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,140.0606818739104C74.85714285714286,140.0606818739104 74.85714285714286,151.81371964122417 134.71428571428572,151.81371964122417L134.71428571428572,165.2461266650355C74.85714285714286,165.2461266650355 74.85714285714286,153.49308889772172 15,153.49308889772172Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M149.71428571428572,174.03266914245245C209.57142857142858,174.03266914245245 209.57142857142858,474.6705397510404 269.42857142857144,474.6705397510404L269.42857142857144,474.73483231326105C209.57142857142858,474.73483231326105 209.57142857142858,174.09696170467305 149.71428571428572,174.09696170467305Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,132.21256511898878C546.3571428571429,132.21256511898878 546.3571428571429,175.70123159094527 943,175.70123159094527L943,178.59407381267096C546.3571428571429,178.59407381267096 546.3571428571429,135.10540734071446 149.71428571428572,135.10540734071446Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,135.10540734071444C209.57142857142858,135.10540734071444 209.57142857142858,154.4091379015116 269.42857142857144,154.4091379015116L269.42857142857144,184.5977804924795C209.57142857142858,184.5977804924795 209.57142857142858,165.29404993168234 149.71428571428572,165.29404993168234Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,165.29404993168234C209.57142857142858,165.29404993168234 209.57142857142858,217.59948252878422 269.42857142857144,217.59948252878422L269.42857142857144,226.33810173955436C209.57142857142858,226.33810173955436 209.57142857142858,174.03266914245248 149.71428571428572,174.03266914245248Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,588.230754308674C142.21428571428572,588.230754308674 142.21428571428572,540.641708617106 269.42857142857144,540.641708617106L269.42857142857144,544.410954308432C142.21428571428572,544.410954308432 142.21428571428572,592 15,592Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,236.403318058739C142.21428571428572,236.403318058739 142.21428571428572,198.83023683745824 269.42857142857144,198.83023683745824L269.42857142857144,202.59948252878422C142.21428571428572,202.59948252878422 142.21428571428572,240.17256375006497 15,240.17256375006497Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,255.17256375006497C74.85714285714286,255.17256375006497 74.85714285714286,223.26110503298858 134.71428571428572,223.26110503298858L134.71428571428572,224.51098690423228C74.85714285714286,224.51098690423228 74.85714285714286,256.42244562130867 15,256.42244562130867Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,214.5147523260057C74.85714285714286,214.5147523260057 74.85714285714286,216.37253930025528 134.71428571428572,216.37253930025528L134.71428571428572,223.26110503298858C74.85714285714286,223.26110503298858 74.85714285714286,221.403318058739 15,221.403318058739Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,216.37253930025528C209.57142857142858,216.37253930025528 209.57142857142858,190.69178923348127 269.42857142857144,190.69178923348127L269.42857142857144,198.83023683745827C209.57142857142858,198.83023683745827 209.57142857142858,224.51098690423228 149.71428571428572,224.51098690423228Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,308.5695880930084C748.4285714285714,308.5695880930084 748.4285714285714,323.6186719556552 943,323.6186719556552L943,324.7644149530842C748.4285714285714,324.7644149530842 748.4285714285714,309.7153310904374 553.8571428571429,309.7153310904374Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,309.7153310904375C748.4285714285714,309.7153310904375 748.4285714285714,373.4041964385634 943,373.4041964385634L943,375.82782141808605C748.4285714285714,375.82782141808605 748.4285714285714,312.1389560699601 553.8571428571429,312.1389560699601Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,312.13895606996005C748.4285714285714,312.13895606996005 748.4285714285714,410.6861461892039 943,410.6861461892039L943,415.6598274180095C748.4285714285714,415.6598274180095 748.4285714285714,317.11263729876566 553.8571428571429,317.11263729876566Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,200.74749754201102C748.4285714285714,200.74749754201102 748.4285714285714,200.52237816426415 943,200.52237816426415L943,211.7712073127233C748.4285714285714,211.7712073127233 748.4285714285714,211.99632669047017 553.8571428571429,211.99632669047017Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,276.40487398564613C748.4285714285714,276.40487398564613 748.4285714285714,398.43868231801144 943,398.43868231801144L943,410.68614618920395C748.4285714285714,410.68614618920395 748.4285714285714,288.65233785683864 553.8571428571429,288.65233785683864Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,231.7581587718901C613.7142857142858,231.7581587718901 613.7142857142858,274.4421100708107 673.5714285714287,274.4421100708107L673.5714285714287,277.36489087259895C613.7142857142858,277.36489087259895 613.7142857142858,234.68093957367827 553.8571428571429,234.68093957367827Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,234.68093957367827C748.4285714285714,234.68093957367827 748.4285714285714,281.5382745940219 943,281.5382745940219L943,318.38695893609474C748.4285714285714,318.38695893609474 748.4285714285714,271.5296239157511 553.8571428571429,271.5296239157511Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,289.49912582457847C748.4285714285714,289.49912582457847 748.4285714285714,469.8438462372272 943,469.8438462372272L943,473.91430850565706C748.4285714285714,473.91430850565706 748.4285714285714,293.56958809300835 553.8571428571429,293.56958809300835Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M553.8571428571429,271.5296239157511C748.4285714285714,271.5296239157511 748.4285714285714,352.89732848353617 943,352.89732848353617L943,353.37246882611134C748.4285714285714,353.37246882611134 748.4285714285714,272.00476425832625 553.8571428571429,272.00476425832625Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,272.00476425832625C748.4285714285714,272.00476425832625 748.4285714285714,368.9901943485526 943,368.9901943485526L943,373.3903040758725C748.4285714285714,373.3903040758725 748.4285714285714,276.40487398564613 553.8571428571429,276.40487398564613Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,194.6422887566693C748.4285714285714,194.6422887566693 748.4285714285714,178.59407381267093 943,178.59407381267093L943,184.69928259801267C748.4285714285714,184.69928259801267 748.4285714285714,200.74749754201105 553.8571428571429,200.74749754201105Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M553.8571428571429,288.6523378568386C748.4285714285714,288.6523378568386 748.4285714285714,453.5218102341781 943,453.5218102341781L943,454.368598201918C748.4285714285714,454.368598201918 748.4285714285714,289.4991258245785 553.8571428571429,289.4991258245785Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,211.9963266904702C748.4285714285714,211.9963266904702 748.4285714285714,226.7712073127233 943,226.7712073127233L943,236.46441491800525C748.4285714285714,236.46441491800525 748.4285714285714,221.68953429575214 553.8571428571429,221.68953429575214Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,221.6895342957521C748.4285714285714,221.6895342957521 748.4285714285714,251.46441491800522 943,251.46441491800522L943,261.5330393941432C748.4285714285714,261.5330393941432 748.4285714285714,231.7581587718901 553.8571428571429,231.7581587718901Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,295.278342219446C74.85714285714286,295.278342219446 74.85714285714286,268.66527388048854 134.71428571428572,268.66527388048854L134.71428571428572,273.0504143177772C74.85714285714286,273.0504143177772 74.85714285714286,299.6634826567347 15,299.6634826567347Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,271.42244562130867C74.85714285714286,271.42244562130867 74.85714285714286,259.8093772823512 134.71428571428572,259.8093772823512L134.71428571428572,268.6652738804886C74.85714285714286,268.6652738804886 74.85714285714286,280.2783422194461 15,280.2783422194461Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,239.5653541050235C613.7142857142858,239.5653541050235 613.7142857142858,373.3903040758725 943,373.3903040758725L943,373.40419643856336C613.7142857142858,373.40419643856336 613.7142857142858,239.5792464677144 284.42857142857144,239.5792464677144Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,233.95703959453257C613.7142857142858,233.95703959453257 613.7142857142858,184.69928259801264 943,184.69928259801264L943,184.85016011839974C613.7142857142858,184.85016011839974 613.7142857142858,234.10791711491967 284.42857142857144,234.10791711491967Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,217.59948252878422C344.28571428571433,217.59948252878422 344.28571428571433,190.19649116206278 404.14285714285717,190.19649116206278L404.14285714285717,206.5540482278111C344.28571428571433,206.5540482278111 344.28571428571433,233.95703959453255 284.42857142857144,233.95703959453255Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,239.33963013448007C613.7142857142858,239.33963013448007 613.7142857142858,353.37246882611134 943,353.37246882611134L943,353.59819279665476C613.7142857142858,353.59819279665476 613.7142857142858,239.5653541050235 284.42857142857144,239.5653541050235Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,234.10791711491964C613.7142857142858,234.10791711491964 613.7142857142858,318.38695893609474 943,318.38695893609474L943,323.61867195565515C613.7142857142858,323.61867195565515 613.7142857142858,239.3396301344801 284.42857142857144,239.3396301344801Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M15,360.82609833434117C276.92857142857144,360.82609833434117 276.92857142857144,282.4007746459394 538.8571428571429,282.4007746459394L538.8571428571429,283.15602378974705C276.92857142857144,283.15602378974705 276.92857142857144,361.5813474781488 15,361.5813474781488Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M688.5714285714287,275.1143281166752C748.4285714285716,275.1143281166752 748.4285714285716,332.4766057725319 808.2857142857143,332.4766057725319L808.2857142857143,334.72706083572155C748.4285714285716,334.72706083572155 748.4285714285716,277.36478317986484 688.5714285714287,277.36478317986484Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M688.5714285714287,274.4421100708107C815.7857142857143,274.4421100708107 815.7857142857143,184.8501601183997 943,184.8501601183997L943,185.5223781642642C815.7857142857143,185.5223781642642 815.7857142857143,275.1143281166752 688.5714285714287,275.1143281166752Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M823.2857142857143,332.4766057725319C883.1428571428571,332.4766057725319 883.1428571428571,473.9143085056571 943,473.9143085056571L943,476.16476356884675C883.1428571428571,476.16476356884675 883.1428571428571,334.72706083572155 823.2857142857143,334.72706083572155Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M15,393.6289094304111C276.92857142857144,393.6289094304111 276.92857142857144,291.65448820361274 538.8571428571429,291.65448820361274L538.8571428571429,292.40779887820776C276.92857142857144,292.40779887820776 276.92857142857144,394.3822201050061 15,394.3822201050061Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,474.6705397510404C613.7142857142858,474.6705397510404 613.7142857142858,324.76441495308427 943,324.76441495308427L943,337.8023434921148C613.7142857142858,337.8023434921148 613.7142857142858,487.7084682900709 284.42857142857144,487.7084682900709Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,525.4176175771065C613.7142857142858,525.4176175771065 613.7142857142858,543.0066632686744 943,543.0066632686744L943,556.8656412120097C613.7142857142858,556.8656412120097 613.7142857142858,539.2765955204418 284.42857142857144,539.2765955204418Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,488.575717877278C613.7142857142858,488.575717877278 613.7142857142858,476.1647635688468 943,476.1647635688468L943,490.7932060968829C613.7142857142858,490.7932060968829 613.7142857142858,503.2041604053141 284.42857142857144,503.2041604053141Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,542.8539327597124C613.7142857142858,542.8539327597124 613.7142857142858,590.4429784512802 943,590.4429784512802L943,592C613.7142857142858,592 613.7142857142858,544.4109543084322 284.42857142857144,544.4109543084322Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,503.2041604053141C613.7142857142858,503.2041604053141 613.7142857142858,505.793206096883 943,505.793206096883L943,528.0066632686754C613.7142857142858,528.0066632686754 613.7142857142858,525.4176175771065 284.42857142857144,525.4176175771065Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,487.7084682900709C613.7142857142858,487.7084682900709 613.7142857142858,353.59819279665476 943,353.59819279665476L943,353.9901943485527C613.7142857142858,353.9901943485527 613.7142857142858,488.10046984196885 284.42857142857144,488.10046984196885Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,539.2765955204419C613.7142857142858,539.2765955204419 613.7142857142858,571.8656412120099 943,571.8656412120099L943,575.4429784512804C613.7142857142858,575.4429784512804 613.7142857142858,542.8539327597124 284.42857142857144,542.8539327597124Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,488.10046984196885C613.7142857142858,488.10046984196885 613.7142857142858,454.36859820191796 943,454.36859820191796L943,454.8438462372271C613.7142857142858,454.8438462372271 613.7142857142858,488.575717877278 284.42857142857144,488.575717877278Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,197.96666927421109C74.85714285714286,197.96666927421109 74.85714285714286,173.6256983005233 134.71428571428572,173.6256983005233L134.71428571428572,175.17378135231792C74.85714285714286,175.17378135231792 74.85714285714286,199.5147523260057 15,199.5147523260057Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,259.8093772823512C209.57142857142858,259.8093772823512 209.57142857142858,226.33810173955433 269.42857142857144,226.33810173955433L269.42857142857144,239.57913877498035C209.57142857142858,239.57913877498035 209.57142857142858,273.05041431777715 149.71428571428572,273.05041431777715Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,8.668621376273222e-13C209.57142857142858,8.668621376273222e-13 209.57142857142858,56.64694706715008 404.14285714285717,56.64694706715008L404.14285714285717,110.49331408609243C209.57142857142858,110.49331408609243 209.57142857142858,53.846367018943205 15,53.846367018943205Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,53.84636701894321C209.57142857142858,53.84636701894321 209.57142857142858,110.49331408609244 404.14285714285717,110.49331408609244L404.14285714285717,147.1064744188244C209.57142857142858,147.1064744188244 209.57142857142858,90.45952735167516 15,90.45952735167516Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,492.3238780048295C74.85714285714286,492.3238780048295 74.85714285714286,484.70318224530104 134.71428571428572,484.70318224530104L134.71428571428572,539.0112280150638C74.85714285714286,539.0112280150638 74.85714285714286,546.6319237745922 15,546.6319237745922Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,561.6319237745915C74.85714285714286,561.6319237745915 74.85714285714286,539.0112280150638 134.71428571428572,539.0112280150638L134.71428571428572,550.6100585491461C74.85714285714286,550.6100585491461 74.85714285714286,573.2307543086738 15,573.2307543086738Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,484.7031822453011C209.57142857142858,484.7031822453011 209.57142857142858,474.734832313261 269.42857142857144,474.734832313261L269.42857142857144,540.641708617106C209.57142857142858,540.641708617106 209.57142857142858,550.6100585491462 149.71428571428572,550.6100585491462Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,176.87266053320934C142.21428571428572,176.87266053320934 142.21428571428572,184.5977804924795 269.42857142857144,184.5977804924795L269.42857142857144,190.6917892334813C142.21428571428572,190.6917892334813 142.21428571428572,182.96666927421114 15,182.96666927421114Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,168.49308889772155C74.85714285714286,168.49308889772155 74.85714285714286,165.2461266650355 134.71428571428572,165.2461266650355L134.71428571428572,173.6256983005233C74.85714285714286,173.6256983005233 74.85714285714286,176.87266053320937 15,176.87266053320937Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,456.53638032443286C479,456.53638032443286 479,417.73431255378136 943,417.73431255378136L943,438.52181023417813C479,438.52181023417813 479,477.3238780048296 15,477.3238780048296Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,448.92551942450746C479,448.92551942450746 479,375.827821418086 943,375.827821418086L943,383.43868231801133C479,383.43868231801133 479,456.5363803244328 15,456.5363803244328Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,383.30778088946676C344.28571428571433,383.30778088946676 344.28571428571433,285.2035857420094 538.8571428571429,285.2035857420094L538.8571428571429,291.6544882036127C344.28571428571433,291.6544882036127 344.28571428571433,389.75868335107003 149.71428571428572,389.75868335107003Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,425.46572357255775C546.3571428571429,425.46572357255775 546.3571428571429,415.65982741800957 943,415.65982741800957L943,417.7343125537813C546.3571428571429,417.7343125537813 546.3571428571429,427.5402087083295 149.71428571428572,427.5402087083295Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,431.85103428873566C74.85714285714286,431.85103428873566 74.85714285714286,425.46572357255775 134.71428571428572,425.46572357255775L134.71428571428572,427.5402087083295C74.85714285714286,427.5402087083295 74.85714285714286,433.9255194245074 15,433.9255194245074Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,425.4001318271323C74.85714285714286,425.4001318271323 74.85714285714286,383.30778088946676 134.71428571428572,383.30778088946676L134.71428571428572,389.75868335107003C74.85714285714286,389.75868335107003 74.85714285714286,431.8510342887356 15,431.8510342887356Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,202.50438984462878C613.7142857142858,202.50438984462878 613.7142857142858,352.80234349211474 943,352.80234349211474L943,352.8973284835361C613.7142857142858,352.8973284835361 613.7142857142858,202.5993748360502 284.42857142857144,202.5993748360502Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,154.4091379015116C344.28571428571433,154.4091379015116 344.28571428571433,147.10647441882438 404.14285714285717,147.10647441882438L404.14285714285717,190.1964911620628C344.28571428571433,190.1964911620628 344.28571428571433,197.49915464475004 284.42857142857144,197.49915464475004Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,197.49915464475C613.7142857142858,197.49915464475 613.7142857142858,276.53303939414315 943,276.53303939414315L943,281.53827459402186C613.7142857142858,281.53827459402186 613.7142857142858,202.50438984462878 284.42857142857144,202.50438984462878Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M419.14285714285717,141.4150211176562C479,141.4150211176562 479,194.6422887566693 538.8571428571429,194.6422887566693L538.8571428571429,251.23815896833287C479,251.23815896833287 479,198.01089132931978 419.14285714285717,198.01089132931978Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M419.14285714285717,56.64694706715008C681.0714285714286,56.64694706715008 681.0714285714286,90.93315754043914 943,90.93315754043914L943,175.70123159094527C681.0714285714286,175.70123159094527 681.0714285714286,141.4150211176562 419.14285714285717,141.4150211176562Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M419.14285714285717,198.01089132931978C479,198.01089132931978 479,308.5695880930084 538.8571428571429,308.5695880930084L538.8571428571429,317.11274499149977C479,317.11274499149977 479,206.55404822781114 419.14285714285717,206.55404822781114Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,409.3822201050061C276.92857142857144,409.3822201050061 276.92857142857144,292.40779887820776 538.8571428571429,292.40779887820776L538.8571428571429,293.42571060033384C276.92857142857144,293.42571060033384 276.92857142857144,410.4001318271322 15,410.4001318271322Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,105.45952735167518C74.85714285714286,105.45952735167518 74.85714285714286,132.21256511898878 134.71428571428572,132.21256511898878L134.71428571428572,151.81371964122417C74.85714285714286,151.81371964122417 74.85714285714286,125.06068187391057 15,125.06068187391057Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,376.5813474781488C276.92857142857144,376.5813474781488 276.92857142857144,283.1560237897471 538.8571428571429,283.1560237897471L538.8571428571429,285.2035857420094C276.92857142857144,285.2035857420094 276.92857142857144,378.6289094304111 15,378.6289094304111Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,314.6634826567346C276.92857142857144,314.6634826567346 276.92857142857144,251.23815896833284 538.8571428571429,251.23815896833284L538.8571428571429,282.40077464593935C276.92857142857144,282.40077464593935 276.92857142857144,345.82609833434105 15,345.82609833434105Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,140.061)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.432407023811152" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.216203511905576)">Agricultural 'waste'</text></g><g class="sankey-node" transform="translate(134.714,132.213)" style="opacity: 1;"><rect class="node-rect" width="15" height="42.96121623332897" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,24.980608116664484)">Bio-conversion</text></g><g class="sankey-node" transform="translate(269.429,474.671)" style="opacity: 1;"><rect class="node-rect" width="15" height="69.74041455739172" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,38.37020727869586)">Liquid</text></g><g class="sankey-node" transform="translate(943.000,90.933)" style="opacity: 1;"><rect class="node-rect" width="15" height="94.58922062382501" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,50.79461031191251)">Losses</text></g><g class="sankey-node" transform="translate(269.429,154.409)" style="opacity: 1;"><rect class="node-rect" width="15" height="48.19034462727262" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,27.59517231363631)">Solid</text></g><g class="sankey-node" transform="translate(269.429,217.599)" style="opacity: 1;"><rect class="node-rect" width="15" height="21.97976393893026" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,14.48988196946513)">Gas</text></g><g class="sankey-node" transform="translate(0.000,588.231)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.7692456913259775" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.384622845662989)">Biofuel imports</text></g><g class="sankey-node" transform="translate(0.000,236.403)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.7692456913259775" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.384622845662989)">Biomass imports</text></g><g class="sankey-node" transform="translate(0.000,255.173)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.2498818712437014" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.124940935621851)">Coal imports</text></g><g class="sankey-node" transform="translate(134.714,216.373)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.138447603976942" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.569223801988471)">Coal</text></g><g class="sankey-node" transform="translate(0.000,214.515)" style="opacity: 1;"><rect class="node-rect" width="15" height="6.888565732733298" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,6.944282866366649)">Coal reserves</text></g><g class="sankey-node" transform="translate(538.857,308.570)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.543156898491361" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.7715784492456805)">District heating</text></g><g class="sankey-node" transform="translate(943.000,276.533)" style="opacity: 1;"><rect class="node-rect" width="15" height="61.2693040979716" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,34.1346520489858)">Industry</text></g><g class="sankey-node" transform="translate(943.000,368.990)" style="opacity: 1;"><rect class="node-rect" width="15" height="14.448487969458824" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,10.724243984729412)">Heating and cooling - commercial</text></g><g class="sankey-node" transform="translate(943.000,398.439)" style="opacity: 1;"><rect class="node-rect" width="15" height="40.08312791616663" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,23.541563958083316)">Heating and cooling - homes</text></g><g class="sankey-node" transform="translate(538.857,194.642)" style="opacity: 1;"><rect class="node-rect" width="15" height="98.9272993363391" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,52.96364966816955)">Electricity grid</text></g><g class="sankey-node" transform="translate(943.000,200.522)" style="opacity: 1;"><rect class="node-rect" width="15" height="11.248829148459151" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,9.124414574229576)">Over generation / exports</text></g><g class="sankey-node" transform="translate(673.571,274.442)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.9227808017881216" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.961390400894061)">H2 conversion</text></g><g class="sankey-node" transform="translate(943.000,469.844)" style="opacity: 1;"><rect class="node-rect" width="15" height="20.94935985965577" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,13.974679929827886)">Road transport</text></g><g class="sankey-node" transform="translate(943.000,352.802)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.1878508564378762" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.093925428218938)">Agriculture</text></g><g class="sankey-node" transform="translate(943.000,453.522)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.3220360030491065" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.161018001524553)">Rail transport</text></g><g class="sankey-node" transform="translate(943.000,226.771)" style="opacity: 1;"><rect class="node-rect" width="15" height="9.693207605281913" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,8.346603802640956)">Lighting &amp; appliances - commercial</text></g><g class="sankey-node" transform="translate(943.000,251.464)" style="opacity: 1;"><rect class="node-rect" width="15" height="10.068624476137927" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,8.534312238068964)">Lighting &amp; appliances - homes</text></g><g class="sankey-node" transform="translate(0.000,295.278)" style="opacity: 1;"><rect class="node-rect" width="15" height="4.385140437288555" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.692570218644278)">Gas imports</text></g><g class="sankey-node" transform="translate(134.714,259.809)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.241037035426075" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.120518517713037)">Ngas</text></g><g class="sankey-node" transform="translate(0.000,271.422)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.855896598137349" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.9279482990686745)">Gas reserves</text></g><g class="sankey-node" transform="translate(404.143,56.647)" style="opacity: 1;"><rect class="node-rect" width="15" height="149.9071011606609" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,78.45355058033044)">Thermal generation</text></g><g class="sankey-node" transform="translate(0.000,360.826)" style="opacity: 1;"><rect class="node-rect" width="15" height="0.7552491438076459" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,3.877624571903823)">Geothermal</text></g><g class="sankey-node" transform="translate(808.286,332.477)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.25045506318952" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.62522753159476)">H2</text></g><g class="sankey-node" transform="translate(0.000,393.629)" style="opacity: 1;"><rect class="node-rect" width="15" height="0.7533106745950136" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,3.8766553372975068)">Hydro</text></g><g class="sankey-node" transform="translate(943.000,543.007)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.858977943335503" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,10.429488971667752)">International shipping</text></g><g class="sankey-node" transform="translate(943.000,590.443)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.5570215487198311" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.278510774359916)">Domestic aviation</text></g><g class="sankey-node" transform="translate(943.000,505.793)" style="opacity: 1;"><rect class="node-rect" width="15" height="22.213457171791447" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,14.606728585895723)">International aviation</text></g><g class="sankey-node" transform="translate(943.000,571.866)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.577337239270264" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,5.288668619635132)">National navigation</text></g><g class="sankey-node" transform="translate(0.000,197.967)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.548083051794606" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.274041525897303)">Marine algae</text></g><g class="sankey-node" transform="translate(0.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="15" height="90.45952735167431" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,48.729763675837155)">Nuclear</text></g><g class="sankey-node" transform="translate(0.000,492.324)" style="opacity: 1;"><rect class="node-rect" width="15" height="54.308045769761975" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,30.654022884880987)">Oil imports</text></g><g class="sankey-node" transform="translate(134.714,484.703)" style="opacity: 1;"><rect class="node-rect" width="15" height="65.90687630384537" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,36.45343815192268)">Oil</text></g><g class="sankey-node" transform="translate(0.000,561.632)" style="opacity: 1;"><rect class="node-rect" width="15" height="11.59883053408248" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,9.29941526704124)">Oil reserves</text></g><g class="sankey-node" transform="translate(0.000,168.493)" style="opacity: 1;"><rect class="node-rect" width="15" height="14.473580376489537" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.736790188244768)">Other waste</text></g><g class="sankey-node" transform="translate(0.000,448.926)" style="opacity: 1;"><rect class="node-rect" width="15" height="28.39835858032211" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,17.699179290161055)">Pumped heat</text></g><g class="sankey-node" transform="translate(134.714,383.308)" style="opacity: 1;"><rect class="node-rect" width="15" height="6.4509024616032775" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,6.725451230801639)">Solar PV</text></g><g class="sankey-node" transform="translate(134.714,425.466)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.0744851357718517" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.537242567885926)">Solar Thermal</text></g><g class="sankey-node" transform="translate(0.000,425.400)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.52538759737513" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.762693798687565)">Solar</text></g><g class="sankey-node" transform="translate(0.000,409.382)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.0179117221262004" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.0089558610631)">Tidal</text></g><g class="sankey-node" transform="translate(0.000,105.460)" style="opacity: 1;"><rect class="node-rect" width="15" height="19.60115452223522" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,13.30057726111761)">UK land based bioenergy</text></g><g class="sankey-node" transform="translate(0.000,376.581)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.047561952262299" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.52378097613115)">Wave</text></g><g class="sankey-node" transform="translate(0.000,314.663)" style="opacity: 1;"><rect class="node-rect" width="15" height="31.162615677606595" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,19.081307838803298)">Wind</text></g></g></g><defs id="topdefs-1c2d54"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 14px; fill: rgb(255, 255, 255); fill-opacity: 1; white-space: pre; pointer-events: all;" x="559" y="50" text-anchor="middle" dy="0em"><tspan class="line" dy="0em" x="559" y="50">Energy forecast for 2050</tspan><tspan class="line" dy="1.3em" x="559" y="50">Source: Department of Energy &amp; Climate Change, Tom Counsell via <a xlink:show="new" target="_blank" xlink:href="https://bost.ocks.org/mike/sankey/" style="cursor:pointer">Mike Bostock</a></tspan></text></g><g class="first-render"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1118" height="772" style="" viewBox="0 0 1118 772"><rect x="0" y="0" width="1118" height="772" style="fill: rgb(0, 0, 0); fill-opacity: 1;"/><defs id="defs') >= 0);
          assert.ok(body.indexOf('<g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,140.0606818739104C74.85714285714286,140.0606818739104 74.85714285714286,151.81371964122417 134.71428571428572,151.81371964122417L134.71428571428572,165.2461266650355C74.85714285714286,165.2461266650355 74.85714285714286,153.49308889772172 15,153.49308889772172Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M149.71428571428572,174.03266914245245C209.57142857142858,174.03266914245245 209.57142857142858,474.6705397510404 269.42857142857144,474.6705397510404L269.42857142857144,474.73483231326105C209.57142857142858,474.73483231326105 209.57142857142858,174.09696170467305 149.71428571428572,174.09696170467305Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,132.21256511898878C546.3571428571429,132.21256511898878 546.3571428571429,175.70123159094527 943,175.70123159094527L943,178.59407381267096C546.3571428571429,178.59407381267096 546.3571428571429,135.10540734071446 149.71428571428572,135.10540734071446Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,135.10540734071444C209.57142857142858,135.10540734071444 209.57142857142858,154.4091379015116 269.42857142857144,154.4091379015116L269.42857142857144,184.5977804924795C209.57142857142858,184.5977804924795 209.57142857142858,165.29404993168234 149.71428571428572,165.29404993168234Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,165.29404993168234C209.57142857142858,165.29404993168234 209.57142857142858,217.59948252878422 269.42857142857144,217.59948252878422L269.42857142857144,226.33810173955436C209.57142857142858,226.33810173955436 209.57142857142858,174.03266914245248 149.71428571428572,174.03266914245248Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,588.230754308674C142.21428571428572,588.230754308674 142.21428571428572,540.641708617106 269.42857142857144,540.641708617106L269.42857142857144,544.410954308432C142.21428571428572,544.410954308432 142.21428571428572,592 15,592Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,236.403318058739C142.21428571428572,236.403318058739 142.21428571428572,198.83023683745824 269.42857142857144,198.83023683745824L269.42857142857144,202.59948252878422C142.21428571428572,202.59948252878422 142.21428571428572,240.17256375006497 15,240.17256375006497Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;"') > 0);
          assert.ok(body.indexOf(' d="M15,255.17256375006497C74.85714285714286,255.17256375006497 74.85714285714286,223.26110503298858 134.71428571428572,223.26110503298858L134.71428571428572,224.51098690423228C74.85714285714286,224.51098690423228 74.85714285714286,256.42244562130867 15,256.42244562130867Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,214.5147523260057C74.85714285714286,214.5147523260057 74.85714285714286,216.37253930025528 134.71428571428572,216.37253930025528L134.71428571428572,223.26110503298858C74.85714285714286,223.26110503298858 74.85714285714286,221.403318058739 15,221.403318058739Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,216.37253930025528C209.57142857142858,216.37253930025528 209.57142857142858,190.69178923348127 269.42857142857144,190.69178923348127L269.42857142857144,198.83023683745827C209.57142857142858,198.83023683745827 209.57142857142858,224.51098690423228 149.71428571428572,224.51098690423228Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,308.5695880930084C748.4285714285714,308.5695880930084 748.4285714285714,323.6186719556552 943,323.6186719556552L943,324.7644149530842C748.4285714285714,324.7644149530842 748.4285714285714,309.7153310904374 553.8571428571429,309.7153310904374Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,309.7153310904375C748.4285714285714,309.7153310904375 748.4285714285714,373.4041964385634 943,373.4041964385634L943,375.82782141808605C748.4285714285714,375.82782141808605 748.4285714285714,312.1389560699601 553.8571428571429,312.1389560699601Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,312.13895606996005C748.4285714285714,312.13895606996005 748.4285714285714,410.6861461892039 943,410.6861461892039L943,415.6598274180095C748.4285714285714,415.6598274180095 748.4285714285714,317.11263729876566 553.8571428571429,317.11263729876566Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,200.74749754201102C748.4285714285714,200.74749754201102 748.4285714285714,200.52237816426415 943,200.52237816426415L943,211.7712073127233C748.4285714285714,211.7712073127233 748.4285714285714,211.99632669047017 553.8571428571429,211.99632669047017Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,276.40487398564613C748.4285714285714,276.40487398564613 748.4285714285714,398.43868231801144 943,398.43868231801144L943,410.68614618920395C748.4285714285714,410.68614618920395 748.4285714285714,288.65233785683864 553.8571428571429,288.65233785683864Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,231.7581587718901C613.7142857142858,231.7581587718901 613.7142857142858,274.4421100708107 673.5714285714287,274.4421100708107L673.5714285714287,277.36489087259895C613.7142857142858,277.36489087259895 613.7142857142858,234.68093957367827 553.8571428571429,234.68093957367827Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,234.68093957367827C748.4285714285714,234.68093957367827 748.4285714285714,281.5382745940219 943,281.5382745940219L943,318.38695893609474C748.4285714285714,318.38695893609474 748.4285714285714,271.5296239157511 553.8571428571429,271.5296239157511Z"/>') > 0);
          assert.ok(body.indexOf('<path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,289.49912582457847C748.4285714285714,289.49912582457847 748.4285714285714,469.8438462372272 943,469.8438462372272L943,473.91430850565706C748.4285714285714,473.91430850565706 748.4285714285714,293.56958809300835 553.8571428571429,293.56958809300835Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M553.8571428571429,271.5296239157511C748.4285714285714,271.5296239157511 748.4285714285714,352.89732848353617 943,352.89732848353617L943,353.37246882611134C748.4285714285714,353.37246882611134 748.4285714285714,272.00476425832625 553.8571428571429,272.00476425832625Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,272.00476425832625C748.4285714285714,272.00476425832625 748.4285714285714,368.9901943485526 943,368.9901943485526L943,373.3903040758725C748.4285714285714,373.3903040758725 748.4285714285714,276.40487398564613 553.8571428571429,276.40487398564613Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,194.6422887566693C748.4285714285714,194.6422887566693 748.4285714285714,178.59407381267093 943,178.59407381267093L943,184.69928259801267C748.4285714285714,184.69928259801267 748.4285714285714,200.74749754201105 553.8571428571429,200.74749754201105Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M553.8571428571429,288.6523378568386C748.4285714285714,288.6523378568386 748.4285714285714,453.5218102341781 943,453.5218102341781L943,454.368598201918C748.4285714285714,454.368598201918 748.4285714285714,289.4991258245785 553.8571428571429,289.4991258245785Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,211.9963266904702C748.4285714285714,211.9963266904702 748.4285714285714,226.7712073127233 943,226.7712073127233L943,236.46441491800525C748.4285714285714,236.46441491800525 748.4285714285714,221.68953429575214 553.8571428571429,221.68953429575214Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M553.8571428571429,221.6895342957521C748.4285714285714,221.6895342957521 748.4285714285714,251.46441491800522 943,251.46441491800522L943,261.5330393941432C748.4285714285714,261.5330393941432 748.4285714285714,231.7581587718901 553.8571428571429,231.7581587718901Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,295.278342219446C74.85714285714286,295.278342219446 74.85714285714286,268.66527388048854 134.71428571428572,268.66527388048854L134.71428571428572,273.0504143177772C74.85714285714286,273.0504143177772 74.85714285714286,299.6634826567347 15,299.6634826567347Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,271.42244562130867C74.85714285714286,271.42244562130867 74.85714285714286,259.8093772823512 134.71428571428572,259.8093772823512L134.71428571428572,268.6652738804886C74.85714285714286,268.6652738804886 74.85714285714286,280.2783422194461 15,280.2783422194461Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,239.5653541050235C613.7142857142858,239.5653541050235 613.7142857142858,373.3903040758725 943,373.3903040758725L943,373.40419643856336C613.7142857142858,373.40419643856336 613.7142857142858,239.5792464677144 284.42857142857144,239.5792464677144Z"/>') > 0);
          assert.ok(body.indexOf('<path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,233.95703959453257C613.7142857142858,233.95703959453257 613.7142857142858,184.69928259801264 943,184.69928259801264L943,184.85016011839974C613.7142857142858,184.85016011839974 613.7142857142858,234.10791711491967 284.42857142857144,234.10791711491967Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,217.59948252878422C344.28571428571433,217.59948252878422 344.28571428571433,190.19649116206278 404.14285714285717,190.19649116206278L404.14285714285717,206.5540482278111C344.28571428571433,206.5540482278111 344.28571428571433,233.95703959453255 284.42857142857144,233.95703959453255Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,239.33963013448007C613.7142857142858,239.33963013448007 613.7142857142858,353.37246882611134 943,353.37246882611134L943,353.59819279665476C613.7142857142858,353.59819279665476 613.7142857142858,239.5653541050235 284.42857142857144,239.5653541050235Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,234.10791711491964C613.7142857142858,234.10791711491964 613.7142857142858,318.38695893609474 943,318.38695893609474L943,323.61867195565515C613.7142857142858,323.61867195565515 613.7142857142858,239.3396301344801 284.42857142857144,239.3396301344801Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M15,360.82609833434117C276.92857142857144,360.82609833434117 276.92857142857144,282.4007746459394 538.8571428571429,282.4007746459394L538.8571428571429,283.15602378974705C276.92857142857144,283.15602378974705 276.92857142857144,361.5813474781488 15,361.5813474781488Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M688.5714285714287,275.1143281166752C748.4285714285716,275.1143281166752 748.4285714285716,332.4766057725319 808.2857142857143,332.4766057725319L808.2857142857143,334.72706083572155C748.4285714285716,334.72706083572155 748.4285714285716,277.36478317986484 688.5714285714287,277.36478317986484Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M688.5714285714287,274.4421100708107C815.7857142857143,274.4421100708107 815.7857142857143,184.8501601183997 943,184.8501601183997L943,185.5223781642642C815.7857142857143,185.5223781642642 815.7857142857143,275.1143281166752 688.5714285714287,275.1143281166752Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M823.2857142857143,332.4766057725319C883.1428571428571,332.4766057725319 883.1428571428571,473.9143085056571 943,473.9143085056571L943,476.16476356884675C883.1428571428571,476.16476356884675 883.1428571428571,334.72706083572155 823.2857142857143,334.72706083572155Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M15,393.6289094304111C276.92857142857144,393.6289094304111 276.92857142857144,291.65448820361274 538.8571428571429,291.65448820361274L538.8571428571429,292.40779887820776C276.92857142857144,292.40779887820776 276.92857142857144,394.3822201050061 15,394.3822201050061Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,474.6705397510404C613.7142857142858,474.6705397510404 613.7142857142858,324.76441495308427 943,324.76441495308427L943,337.8023434921148C613.7142857142858,337.8023434921148 613.7142857142858,487.7084682900709 284.42857142857144,487.7084682900709Z"/>') > 0);
          assert.ok(body.indexOf('<path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,525.4176175771065C613.7142857142858,525.4176175771065 613.7142857142858,543.0066632686744 943,543.0066632686744L943,556.8656412120097C613.7142857142858,556.8656412120097 613.7142857142858,539.2765955204418 284.42857142857144,539.2765955204418Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,488.575717877278C613.7142857142858,488.575717877278 613.7142857142858,476.1647635688468 943,476.1647635688468L943,490.7932060968829C613.7142857142858,490.7932060968829 613.7142857142858,503.2041604053141 284.42857142857144,503.2041604053141Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,542.8539327597124C613.7142857142858,542.8539327597124 613.7142857142858,590.4429784512802 943,590.4429784512802L943,592C613.7142857142858,592 613.7142857142858,544.4109543084322 284.42857142857144,544.4109543084322Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,503.2041604053141C613.7142857142858,503.2041604053141 613.7142857142858,505.793206096883 943,505.793206096883L943,528.0066632686754C613.7142857142858,528.0066632686754 613.7142857142858,525.4176175771065 284.42857142857144,525.4176175771065Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,487.7084682900709C613.7142857142858,487.7084682900709 613.7142857142858,353.59819279665476 943,353.59819279665476L943,353.9901943485527C613.7142857142858,353.9901943485527 613.7142857142858,488.10046984196885 284.42857142857144,488.10046984196885Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,539.2765955204419C613.7142857142858,539.2765955204419 613.7142857142858,571.8656412120099 943,571.8656412120099L943,575.4429784512804C613.7142857142858,575.4429784512804 613.7142857142858,542.8539327597124 284.42857142857144,542.8539327597124Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,488.10046984196885C613.7142857142858,488.10046984196885 613.7142857142858,454.36859820191796 943,454.36859820191796L943,454.8438462372271C613.7142857142858,454.8438462372271 613.7142857142858,488.575717877278 284.42857142857144,488.575717877278Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,197.96666927421109C74.85714285714286,197.96666927421109 74.85714285714286,173.6256983005233 134.71428571428572,173.6256983005233L134.71428571428572,175.17378135231792C74.85714285714286,175.17378135231792 74.85714285714286,199.5147523260057 15,199.5147523260057Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,259.8093772823512C209.57142857142858,259.8093772823512 209.57142857142858,226.33810173955433 269.42857142857144,226.33810173955433L269.42857142857144,239.57913877498035C209.57142857142858,239.57913877498035 209.57142857142858,273.05041431777715 149.71428571428572,273.05041431777715Z"/>') > 0);
          assert.ok(body.indexOf('<path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,8.668621376273222e-13C209.57142857142858,8.668621376273222e-13 209.57142857142858,56.64694706715008 404.14285714285717,56.64694706715008L404.14285714285717,110.49331408609243C209.57142857142858,110.49331408609243 209.57142857142858,53.846367018943205 15,53.846367018943205Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,53.84636701894321C209.57142857142858,53.84636701894321 209.57142857142858,110.49331408609244 404.14285714285717,110.49331408609244L404.14285714285717,147.1064744188244C209.57142857142858,147.1064744188244 209.57142857142858,90.45952735167516 15,90.45952735167516Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,492.3238780048295C74.85714285714286,492.3238780048295 74.85714285714286,484.70318224530104 134.71428571428572,484.70318224530104L134.71428571428572,539.0112280150638C74.85714285714286,539.0112280150638 74.85714285714286,546.6319237745922 15,546.6319237745922Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,561.6319237745915C74.85714285714286,561.6319237745915 74.85714285714286,539.0112280150638 134.71428571428572,539.0112280150638L134.71428571428572,550.6100585491461C74.85714285714286,550.6100585491461 74.85714285714286,573.2307543086738 15,573.2307543086738Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,484.7031822453011C209.57142857142858,484.7031822453011 209.57142857142858,474.734832313261 269.42857142857144,474.734832313261L269.42857142857144,540.641708617106C209.57142857142858,540.641708617106 209.57142857142858,550.6100585491462 149.71428571428572,550.6100585491462Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,176.87266053320934C142.21428571428572,176.87266053320934 142.21428571428572,184.5977804924795 269.42857142857144,184.5977804924795L269.42857142857144,190.6917892334813C142.21428571428572,190.6917892334813 142.21428571428572,182.96666927421114 15,182.96666927421114Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,168.49308889772155C74.85714285714286,168.49308889772155 74.85714285714286,165.2461266650355 134.71428571428572,165.2461266650355L134.71428571428572,173.6256983005233C74.85714285714286,173.6256983005233 74.85714285714286,176.87266053320937 15,176.87266053320937Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,456.53638032443286C479,456.53638032443286 479,417.73431255378136 943,417.73431255378136L943,438.52181023417813C479,438.52181023417813 479,477.3238780048296 15,477.3238780048296Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,448.92551942450746C479,448.92551942450746 479,375.827821418086 943,375.827821418086L943,383.43868231801133C479,383.43868231801133 479,456.5363803244328 15,456.5363803244328Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,383.30778088946676C344.28571428571433,383.30778088946676 344.28571428571433,285.2035857420094 538.8571428571429,285.2035857420094L538.8571428571429,291.6544882036127C344.28571428571433,291.6544882036127 344.28571428571433,389.75868335107003 149.71428571428572,389.75868335107003Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M149.71428571428572,425.46572357255775C546.3571428571429,425.46572357255775 546.3571428571429,415.65982741800957 943,415.65982741800957L943,417.7343125537813C546.3571428571429,417.7343125537813 546.3571428571429,427.5402087083295 149.71428571428572,427.5402087083295Z"/>') > 0);
          assert.ok(body.indexOf('<path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,431.85103428873566C74.85714285714286,431.85103428873566 74.85714285714286,425.46572357255775 134.71428571428572,425.46572357255775L134.71428571428572,427.5402087083295C74.85714285714286,427.5402087083295 74.85714285714286,433.9255194245074 15,433.9255194245074Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,425.4001318271323C74.85714285714286,425.4001318271323 74.85714285714286,383.30778088946676 134.71428571428572,383.30778088946676L134.71428571428572,389.75868335107003C74.85714285714286,389.75868335107003 74.85714285714286,431.8510342887356 15,431.8510342887356Z"/><path class="sankey-link" style="stroke: rgb(255, 255, 255); stroke-opacity: 0.6; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 1; opacity: 1;" d="M284.42857142857144,202.50438984462878C613.7142857142858,202.50438984462878 613.7142857142858,352.80234349211474 943,352.80234349211474L943,352.8973284835361C613.7142857142858,352.8973284835361 613.7142857142858,202.5993748360502 284.42857142857144,202.5993748360502Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,154.4091379015116C344.28571428571433,154.4091379015116 344.28571428571433,147.10647441882438 404.14285714285717,147.10647441882438L404.14285714285717,190.1964911620628C344.28571428571433,190.1964911620628 344.28571428571433,197.49915464475004 284.42857142857144,197.49915464475004Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M284.42857142857144,197.49915464475C613.7142857142858,197.49915464475 613.7142857142858,276.53303939414315 943,276.53303939414315L943,281.53827459402186C613.7142857142858,281.53827459402186 613.7142857142858,202.50438984462878 284.42857142857144,202.50438984462878Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M419.14285714285717,141.4150211176562C479,141.4150211176562 479,194.6422887566693 538.8571428571429,194.6422887566693L538.8571428571429,251.23815896833287C479,251.23815896833287 479,198.01089132931978 419.14285714285717,198.01089132931978Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M419.14285714285717,56.64694706715008C681.0714285714286,56.64694706715008 681.0714285714286,90.93315754043914 943,90.93315754043914L943,175.70123159094527C681.0714285714286,175.70123159094527 681.0714285714286,141.4150211176562 419.14285714285717,141.4150211176562Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M419.14285714285717,198.01089132931978C479,198.01089132931978 479,308.5695880930084 538.8571428571429,308.5695880930084L538.8571428571429,317.11274499149977C479,317.11274499149977 479,206.55404822781114 419.14285714285717,206.55404822781114Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,409.3822201050061C276.92857142857144,409.3822201050061 276.92857142857144,292.40779887820776 538.8571428571429,292.40779887820776L538.8571428571429,293.42571060033384C276.92857142857144,293.42571060033384 276.92857142857144,410.4001318271322 15,410.4001318271322Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,105.45952735167518C74.85714285714286,105.45952735167518 74.85714285714286,132.21256511898878 134.71428571428572,132.21256511898878L134.71428571428572,151.81371964122417C74.85714285714286,151.81371964122417 74.85714285714286,125.06068187391057 15,125.06068187391057Z"/>') > 0);
          assert.ok(body.indexOf('<path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,376.5813474781488C276.92857142857144,376.5813474781488 276.92857142857144,283.1560237897471 538.8571428571429,283.1560237897471L538.8571428571429,285.2035857420094C276.92857142857144,285.2035857420094 276.92857142857144,378.6289094304111 15,378.6289094304111Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 0.6; stroke-width: 0; opacity: 1;" d="M15,314.6634826567346C276.92857142857144,314.6634826567346 276.92857142857144,251.23815896833284 538.8571428571429,251.23815896833284L538.8571428571429,282.40077464593935C276.92857142857144,282.40077464593935 276.92857142857144,345.82609833434105 15,345.82609833434105Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,140.061)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.432407023811152" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.216203511905576)">Agricultural \'waste\'</text></g><g class="sankey-node" transform="translate(134.714,132.213)" style="opacity: 1;"><rect class="node-rect" width="15" height="42.96121623332897" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,24.980608116664484)">Bio-conversion</text></g><g class="sankey-node" transform="translate(269.429,474.671)" style="opacity: 1;"><rect class="node-rect" width="15" height="69.74041455739172" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,38.37020727869586)">Liquid</text></g><g class="sankey-node" transform="translate(943.000,90.933)" style="opacity: 1;"><rect class="node-rect" width="15" height="94.58922062382501" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,50.79461031191251)">Losses</text></g><g class="sankey-node" transform="translate(269.429,154.409)" style="opacity: 1;"><rect class="node-rect" width="15" height="48.19034462727262" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/>') > 0);
          assert.ok(body.indexOf('<text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,27.59517231363631)">Solid</text></g><g class="sankey-node" transform="translate(269.429,217.599)" style="opacity: 1;"><rect class="node-rect" width="15" height="21.97976393893026" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,14.48988196946513)">Gas</text></g><g class="sankey-node" transform="translate(0.000,588.231)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.7692456913259775" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.384622845662989)">Biofuel imports</text></g><g class="sankey-node" transform="translate(0.000,236.403)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.7692456913259775" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.384622845662989)">Biomass imports</text></g><g class="sankey-node" transform="translate(0.000,255.173)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.2498818712437014" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.124940935621851)">Coal imports</text></g><g class="sankey-node" transform="translate(134.714,216.373)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.138447603976942" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.569223801988471)">Coal</text></g><g class="sankey-node" transform="translate(0.000,214.515)" style="opacity: 1;"><rect class="node-rect" width="15" height="6.888565732733298" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/>') > 0);
          assert.ok(body.indexOf('<text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,6.944282866366649)">Coal reserves</text></g><g class="sankey-node" transform="translate(538.857,308.570)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.543156898491361" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.7715784492456805)">District heating</text></g><g class="sankey-node" transform="translate(943.000,276.533)" style="opacity: 1;"><rect class="node-rect" width="15" height="61.2693040979716" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,34.1346520489858)">Industry</text></g><g class="sankey-node" transform="translate(943.000,368.990)" style="opacity: 1;"><rect class="node-rect" width="15" height="14.448487969458824" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,10.724243984729412)">Heating and cooling - commercial</text></g><g class="sankey-node" transform="translate(943.000,398.439)" style="opacity: 1;"><rect class="node-rect" width="15" height="40.08312791616663" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,23.541563958083316)">Heating and cooling - homes</text></g><g class="sankey-node" transform="translate(538.857,194.642)" style="opacity: 1;"><rect class="node-rect" width="15" height="98.9272993363391" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,52.96364966816955)">Electricity grid</text></g><g class="sankey-node" transform="translate(943.000,200.522)" style="opacity: 1;"><rect class="node-rect" width="15" height="11.248829148459151" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/>') > 0);
          assert.ok(body.indexOf('<text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,9.124414574229576)">Over generation / exports</text></g><g class="sankey-node" transform="translate(673.571,274.442)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.9227808017881216" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.961390400894061)">H2 conversion</text></g><g class="sankey-node" transform="translate(943.000,469.844)" style="opacity: 1;"><rect class="node-rect" width="15" height="20.94935985965577" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,13.974679929827886)">Road transport</text></g><g class="sankey-node" transform="translate(943.000,352.802)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.1878508564378762" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.093925428218938)">Agriculture</text></g><g class="sankey-node" transform="translate(943.000,453.522)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.3220360030491065" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.161018001524553)">Rail transport</text></g><g class="sankey-node" transform="translate(943.000,226.771)" style="opacity: 1;"><rect class="node-rect" width="15" height="9.693207605281913" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,8.346603802640956)">Lighting &amp; appliances - commercial</text></g>') > 0);
          assert.ok(body.indexOf('<g class="sankey-node" transform="translate(943.000,251.464)" style="opacity: 1;"><rect class="node-rect" width="15" height="10.068624476137927" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,8.534312238068964)">Lighting &amp; appliances - homes</text></g><g class="sankey-node" transform="translate(0.000,295.278)" style="opacity: 1;"><rect class="node-rect" width="15" height="4.385140437288555" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,5.692570218644278)">Gas imports</text></g><g class="sankey-node" transform="translate(134.714,259.809)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.241037035426075" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.120518517713037)">Ngas</text></g><g class="sankey-node" transform="translate(0.000,271.422)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.855896598137349" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.9279482990686745)">Gas reserves</text></g><g class="sankey-node" transform="translate(404.143,56.647)" style="opacity: 1;"><rect class="node-rect" width="15" height="149.9071011606609" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,78.45355058033044)">Thermal generation</text></g><g class="sankey-node" transform="translate(0.000,360.826)" style="opacity: 1;"><rect class="node-rect" width="15" height="0.7552491438076459" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,3.877624571903823)">Geothermal</text></g>') > 0);
          assert.ok(body.indexOf('<g class="sankey-node" transform="translate(808.286,332.477)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.25045506318952" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.62522753159476)">H2</text></g><g class="sankey-node" transform="translate(0.000,393.629)" style="opacity: 1;"><rect class="node-rect" width="15" height="0.7533106745950136" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,3.8766553372975068)">Hydro</text></g><g class="sankey-node" transform="translate(943.000,543.007)" style="opacity: 1;"><rect class="node-rect" width="15" height="13.858977943335503" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,10.429488971667752)">International shipping</text></g><g class="sankey-node" transform="translate(943.000,590.443)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.5570215487198311" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,4.278510774359916)">Domestic aviation</text></g><g class="sankey-node" transform="translate(943.000,505.793)" style="opacity: 1;"><rect class="node-rect" width="15" height="22.213457171791447" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,14.606728585895723)">International aviation</text></g><g class="sankey-node" transform="translate(943.000,571.866)" style="opacity: 1;"><rect class="node-rect" width="15" height="3.577337239270264" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,5.288668619635132)">National navigation</text></g>') > 0);
          assert.ok(body.indexOf('<g class="sankey-node" transform="translate(0.000,197.967)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.548083051794606" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.274041525897303)">Marine algae</text></g><g class="sankey-node" transform="translate(0.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="15" height="90.45952735167431" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,48.729763675837155)">Nuclear</text></g><g class="sankey-node" transform="translate(0.000,492.324)" style="opacity: 1;"><rect class="node-rect" width="15" height="54.308045769761975" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,30.654022884880987)">Oil imports</text></g><g class="sankey-node" transform="translate(134.714,484.703)" style="opacity: 1;"><rect class="node-rect" width="15" height="65.90687630384537" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,36.45343815192268)">Oil</text></g><g class="sankey-node" transform="translate(0.000,561.632)" style="opacity: 1;"><rect class="node-rect" width="15" height="11.59883053408248" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(188, 189, 34); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,9.29941526704124)">Oil reserves</text></g><g class="sankey-node" transform="translate(0.000,168.493)" style="opacity: 1;"><rect class="node-rect" width="15" height="14.473580376489537" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(23, 190, 207); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,10.736790188244768)">Other waste</text></g><g class="sankey-node" transform="translate(0.000,448.926)" style="opacity: 1;">') > 0);
          assert.ok(body.indexOf('<rect class="node-rect" width="15" height="28.39835858032211" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,17.699179290161055)">Pumped heat</text></g><g class="sankey-node" transform="translate(134.714,383.308)" style="opacity: 1;"><rect class="node-rect" width="15" height="6.4509024616032775" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,6.725451230801639)">Solar PV</text></g><g class="sankey-node" transform="translate(134.714,425.466)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.0744851357718517" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.537242567885926)">Solar Thermal</text></g><g class="sankey-node" transform="translate(0.000,425.400)" style="opacity: 1;"><rect class="node-rect" width="15" height="8.52538759737513" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,7.762693798687565)">Solar</text></g><g class="sankey-node" transform="translate(0.000,409.382)" style="opacity: 1;"><rect class="node-rect" width="15" height="1.0179117221262004" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.0089558610631)">Tidal</text></g>') > 0);
          assert.ok(body.indexOf('<g class="sankey-node" transform="translate(0.000,105.460)" style="opacity: 1;"><rect class="node-rect" width="15" height="19.60115452223522" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,13.30057726111761)">UK land based bioenergy</text></g><g class="sankey-node" transform="translate(0.000,376.581)" style="opacity: 1;"><rect class="node-rect" width="15" height="2.047561952262299" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(227, 119, 194); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,4.52378097613115)">Wave</text></g><g class="sankey-node" transform="translate(0.000,314.663)" style="opacity: 1;"><rect class="node-rect" width="15" height="31.162615677606595" style="stroke-width: 0.5; stroke: rgb(0, 0, 0); stroke-opacity: 1; fill: rgb(127, 127, 127); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(255, 255, 255); fill-opacity: 1; text-shadow: 1px 1px 1px #444, -1px -1px 1px #444, 1px -1px 1px #444, -1px 1px 1px #444; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(18.25,19.081307838803298)">Wind</text></g></g></g><defs id="topdefs') > 0);
          assert.ok(body.indexOf('<g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 14px; fill: rgb(255, 255, 255); fill-opacity: 1; white-space: pre; pointer-events: all;" x="559" y="50" text-anchor="middle" dy="0em"><tspan class="line" dy="0em" x="559" y="50">Energy forecast for 2050</tspan><tspan class="line" dy="1.3em" x="559" y="50">Source: Department of Energy &amp; Climate Change, Tom Counsell via <a xlink:show="new" target="_blank" xlink:href="https://bost.ocks.org/mike/sankey/" style="cursor:pointer">Mike Bostock</a></tspan></text></g><g class="first-render"/></g></svg>') > 0);
        });
      });
    });

    it('Define Node Position', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/sankey-diagram/#define-node-position example.
      const payload = `{
                         "data": [
                           {
                             "type": "sankey",
                             "arrangement": "snap",
                             "node": {
                               "label": [ "A", "B", "C", "D", "E", "F" ],
                               "x": [ 0.2, 0.1, 0.5, 0.7, 0.3, 0.5 ],
                               "y": [ 0.7, 0.5, 0.2, 0.4, 0.2, 0.3 ],
                               "pad": 10
                             },
                             "link": {
                               "source": [ 0, 0, 1, 2, 5, 4, 3, 5 ],
                               "target": [ 5, 3, 4, 3, 0, 2, 2, 3 ],
                               "value": [ 1, 2, 1, 1, 1, 1, 1, 2 ]
                             }
                           }
                         ],
                         "layout": {
                           "title": {
                             "text": "Sankey with manually positioned node"
                           },
                           "width": 720,
                           "height": 520
                         }
                       }`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based output would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="720" height="520" style="" viewBox="0 0 720 520"><rect x="0" y="0" width="720" height="520" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-042ff2"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricprecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M122,214.9210292812777C196,214.9210292812777 196,93.38598047914819 270,93.38598047914819L270,108.77196095829636C196,108.77196095829636 196,230.3070097604259 122,230.3070097604259Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M122,230.30700976042587C252,230.30700976042587 252,143.6929902395741 382,143.6929902395741L382,174.46495119787045C252,174.46495119787045 252,261.07897071872225 122,261.07897071872225Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M66,162.3070097604259C112,162.3070097604259 112,60.307009760425906 158,60.307009760425906L158,75.69299023957409C112,75.69299023957409 112,177.6929902395741 66,177.6929902395741Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M290,52.61401952085181C336,52.61401952085181 336,97.53504880212955 382,97.53504880212955L382,112.92102928127773C336,112.92102928127773 336,68 290,68Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M 102 245.69299023957404  L 97 245.69299023957404 A 25.38598047914818 25.38598047914818 0 0 0 71.61401952085183 271.07897071872225 L 71.61401952085183 276.07897071872225 A 25.38598047914818 25.38598047914818 0 0 0 97 301.46495119787045 L 295 301.46495119787045 A 25.38598047914818 25.38598047914818 0 0 0 320.3859804791482 276.07897071872225 L 320.3859804791482 149.54392191659275 A 25.38598047914818 25.38598047914818 0 0 0 295 124.15794143744456 L 290 124.15794143744456 L 290 139.54392191659275 L 295 139.54392191659275 A 10 10 0 0 1 305 149.54392191659275 L 305 276.07897071872225 A 10 10 0 0 1 295 286.07897071872225 L 97 286.07897071872225 A 10 10 0 0 1 87 276.07897071872225 L 87 271.07897071872225 A 10 10 0 0 1 97 261.07897071872225 L 102 261.07897071872225Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M178,60.307009760425906C224,60.307009760425906 224,68 270,68L270,83.38598047914817C224,83.38598047914817 224,75.69299023957409 178,75.69299023957409Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M 270 68 L 265 68A 25.38598047914818 25.38598047914818 0 0 1 239.6140195208518 42.61401952085181L 239.6140195208518 37.61401952085181 A 25.38598047914818 25.38598047914818 0 0 1 265 12.228039041703632 L 407 12.228039041703632 A 25.38598047914818 25.38598047914818 0 0 1 432.3859804791482 37.61401952085181 L 432.3859804791482 87.53504880212955 A 25.38598047914818 25.38598047914818 0 0 1 407 112.92102928127773 L 402 112.92102928127773 L 402 97.53504880212955 L 407 97.53504880212955 A 10 10 0 0 0 417 87.53504880212955 L 417 37.61401952085181 A 10 10 0 0 0 407 27.614019520851812 L 265 27.614019520851812 A 10 10 0 0 0 255 37.61401952085181 L 255 42.61401952085181 A 10 10 0 0 0 265 52.61401952085181 L 270 52.61401952085181Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M290,93.38598047914819C336,93.38598047914819 336,112.92102928127774 382,112.92102928127774L382,143.6929902395741C336,143.6929902395741 336,124.15794143744456 290,124.15794143744456Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(102.000,214.921)" style="opacity: 1;"><rect class="node-rect" width="20" height="46.15794143744455" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,27.278970718722274)">A</text></g><g class="sankey-node" transform="translate(46.000,162.307)" style="opacity: 1;"><rect class="node-rect" width="20" height="15.385980479148202" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,11.8929902395741)">B</text></g><g class="sankey-node" transform="translate(270.000,52.614)" style="opacity: 1;"><rect class="node-rect" width="20" height="30.771960958296376" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,19.585980479148187)">C</text></g><g class="sankey-node" transform="translate(382.000,97.535)" style="opacity: 1;"><rect class="node-rect" width="20" height="76.9299023957409" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,42.66495119787045)">D</text></g><g class="sankey-node" transform="translate(158.000,60.307)" style="opacity: 1;"><rect class="node-rect" width="20" height="15.385980479148174" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,11.892990239574086)">E</text></g><g class="sankey-node" transform="translate(270.000,93.386)" style="opacity: 1;"><rect class="node-rect" width="20" height="46.15794143744456" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,27.27897071872228)">F</text></g></g></g><defs id="topdefs-042ff2"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 17px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="360" y="50" text-anchor="middle" dy="0em">Sankey with manually positioned node</text></g><g class="first-render"/></g></svg>

          // Current server response is visually the same.
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="720" height="520" style="" viewBox="0 0 720 520"><rect x="0" y="0" width="720" height="520" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-d101da"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M122,214.9210292812777C196,214.9210292812777 196,93.38598047914819 270,93.38598047914819L270,108.77196095829636C196,108.77196095829636 196,230.3070097604259 122,230.3070097604259Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M122,230.30700976042587C252,230.30700976042587 252,143.6929902395741 382,143.6929902395741L382,174.46495119787045C252,174.46495119787045 252,261.07897071872225 122,261.07897071872225Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M66,162.3070097604259C112,162.3070097604259 112,60.307009760425906 158,60.307009760425906L158,75.69299023957409C112,75.69299023957409 112,177.6929902395741 66,177.6929902395741Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M290,52.61401952085181C336,52.61401952085181 336,97.53504880212955 382,97.53504880212955L382,112.92102928127773C336,112.92102928127773 336,68 290,68Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M 102 245.69299023957404  L 97 245.69299023957404 A 25.38598047914818 25.38598047914818 0 0 0 71.61401952085183 271.07897071872225 L 71.61401952085183 276.07897071872225 A 25.38598047914818 25.38598047914818 0 0 0 97 301.46495119787045 L 295 301.46495119787045 A 25.38598047914818 25.38598047914818 0 0 0 320.3859804791482 276.07897071872225 L 320.3859804791482 149.54392191659275 A 25.38598047914818 25.38598047914818 0 0 0 295 124.15794143744456 L 290 124.15794143744456 L 290 139.54392191659275 L 295 139.54392191659275 A 10 10 0 0 1 305 149.54392191659275 L 305 276.07897071872225 A 10 10 0 0 1 295 286.07897071872225 L 97 286.07897071872225 A 10 10 0 0 1 87 276.07897071872225 L 87 271.07897071872225 A 10 10 0 0 1 97 261.07897071872225 L 102 261.07897071872225Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M178,60.307009760425906C224,60.307009760425906 224,68 270,68L270,83.38598047914817C224,83.38598047914817 224,75.69299023957409 178,75.69299023957409Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M 270 68 L 265 68A 25.38598047914818 25.38598047914818 0 0 1 239.6140195208518 42.61401952085181L 239.6140195208518 37.61401952085181 A 25.38598047914818 25.38598047914818 0 0 1 265 12.228039041703632 L 407 12.228039041703632 A 25.38598047914818 25.38598047914818 0 0 1 432.3859804791482 37.61401952085181 L 432.3859804791482 87.53504880212955 A 25.38598047914818 25.38598047914818 0 0 1 407 112.92102928127773 L 402 112.92102928127773 L 402 97.53504880212955 L 407 97.53504880212955 A 10 10 0 0 0 417 87.53504880212955 L 417 37.61401952085181 A 10 10 0 0 0 407 27.614019520851812 L 265 27.614019520851812 A 10 10 0 0 0 255 37.61401952085181 L 255 42.61401952085181 A 10 10 0 0 0 265 52.61401952085181 L 270 52.61401952085181Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M290,93.38598047914819C336,93.38598047914819 336,112.92102928127774 382,112.92102928127774L382,143.6929902395741C336,143.6929902395741 336,124.15794143744456 290,124.15794143744456Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(102.000,214.921)" style="opacity: 1;"><rect class="node-rect" width="20" height="46.15794143744455" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,27.278970718722274)">A</text></g><g class="sankey-node" transform="translate(46.000,162.307)" style="opacity: 1;"><rect class="node-rect" width="20" height="15.385980479148202" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,11.8929902395741)">B</text></g><g class="sankey-node" transform="translate(270.000,52.614)" style="opacity: 1;"><rect class="node-rect" width="20" height="30.771960958296376" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,19.585980479148187)">C</text></g><g class="sankey-node" transform="translate(382.000,97.535)" style="opacity: 1;"><rect class="node-rect" width="20" height="76.9299023957409" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,42.66495119787045)">D</text></g><g class="sankey-node" transform="translate(158.000,60.307)" style="opacity: 1;"><rect class="node-rect" width="20" height="15.385980479148174" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,11.892990239574086)">E</text></g><g class="sankey-node" transform="translate(270.000,93.386)" style="opacity: 1;"><rect class="node-rect" width="20" height="46.15794143744456" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,27.27897071872228)">F</text></g></g></g><defs id="topdefs-d101da"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 17px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="360" y="50" text-anchor="middle" dy="0em">Sankey with manually positioned node</text></g><g class="first-render"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="720" height="520" style="" viewBox="0 0 720 520"><rect x="0" y="0" width="720" height="520" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs') >= 0);
          assert.ok(body.indexOf('<g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M122,214.9210292812777C196,214.9210292812777 196,93.38598047914819 270,93.38598047914819L270,108.77196095829636C196,108.77196095829636 196,230.3070097604259 122,230.3070097604259Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M122,230.30700976042587C252,230.30700976042587 252,143.6929902395741 382,143.6929902395741L382,174.46495119787045C252,174.46495119787045 252,261.07897071872225 122,261.07897071872225Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M66,162.3070097604259C112,162.3070097604259 112,60.307009760425906 158,60.307009760425906L158,75.69299023957409C112,75.69299023957409 112,177.6929902395741 66,177.6929902395741Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M290,52.61401952085181C336,52.61401952085181 336,97.53504880212955 382,97.53504880212955L382,112.92102928127773C336,112.92102928127773 336,68 290,68Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M 102 245.69299023957404  L 97 245.69299023957404 A 25.38598047914818 25.38598047914818 0 0 0 71.61401952085183 271.07897071872225 L 71.61401952085183 276.07897071872225 A 25.38598047914818 25.38598047914818 0 0 0 97 301.46495119787045 L 295 301.46495119787045 A 25.38598047914818 25.38598047914818 0 0 0 320.3859804791482 276.07897071872225 L 320.3859804791482 149.54392191659275 A 25.38598047914818 25.38598047914818 0 0 0 295 124.15794143744456 L 290 124.15794143744456 L 290 139.54392191659275 L 295 139.54392191659275 A 10 10 0 0 1 305 149.54392191659275 L 305 276.07897071872225 A 10 10 0 0 1 295 286.07897071872225 L 97 286.07897071872225 A 10 10 0 0 1 87 276.07897071872225 L 87 271.07897071872225 A 10 10 0 0 1 97 261.07897071872225 L 102 261.07897071872225Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M178,60.307009760425906C224,60.307009760425906 224,68 270,68L270,83.38598047914817C224,83.38598047914817 224,75.69299023957409 178,75.69299023957409Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M 270 68 L 265 68A 25.38598047914818 25.38598047914818 0 0 1 239.6140195208518 42.61401952085181L 239.6140195208518 37.61401952085181 A 25.38598047914818 25.38598047914818 0 0 1 265 12.228039041703632 L 407 12.228039041703632 A 25.38598047914818 25.38598047914818 0 0 1 432.3859804791482 37.61401952085181 L 432.3859804791482 87.53504880212955 A 25.38598047914818 25.38598047914818 0 0 1 407 112.92102928127773 L 402 112.92102928127773 L 402 97.53504880212955 L 407 97.53504880212955 A 10 10 0 0 0 417 87.53504880212955 L 417 37.61401952085181 A 10 10 0 0 0 407 27.614019520851812 L 265 27.614019520851812 A 10 10 0 0 0 255 37.61401952085181 L 255 42.61401952085181 A 10 10 0 0 0 265 52.61401952085181 L 270 52.61401952085181Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M290,93.38598047914819C336,93.38598047914819 336,112.92102928127774 382,112.92102928127774L382,143.6929902395741C336,143.6929902395741 336,124.15794143744456 290,124.15794143744456Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(102.000,214.921)" style="opacity: 1;"><rect class="node-rect" width="20" height="46.15794143744455" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,27.278970718722274)">A</text></g><g class="sankey-node" transform="translate(46.000,162.307)" style="opacity: 1;"><rect class="node-rect" width="20" height="15.385980479148202" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,11.8929902395741)">B</text></g><g class="sankey-node" transform="translate(270.000,52.614)" style="opacity: 1;"><rect class="node-rect" width="20" height="30.771960958296376" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,19.585980479148187)">C</text></g><g class="sankey-node" transform="translate(382.000,97.535)" style="opacity: 1;"><rect class="node-rect" width="20" height="76.9299023957409" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,42.66495119787045)">D</text></g><g class="sankey-node" transform="translate(158.000,60.307)" style="opacity: 1;"><rect class="node-rect" width="20" height="15.385980479148174" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,11.892990239574086)">E</text></g><g class="sankey-node" transform="translate(270.000,93.386)" style="opacity: 1;"><rect class="node-rect" width="20" height="46.15794143744456" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,27.27897071872228)">F</text></g></g></g><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 17px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="360" y="50" text-anchor="middle" dy="0em">Sankey with manually positioned node</text></g><g class="first-render"/></g></svg>') > 0);
        });
      });
    });

    it('Node Alignment', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/sankey-diagram/#node-alignment example.
      const payload = `{
                         "data": [
                           {
                             "type": "sankey",
                             "orientation": "h",
                             "node": {
                               "label": [ "0", "1", "2", "3", "4", "5" ],
                               "align": "right"
                             },
                             "link": {
                               "source": [ 0, 1, 4, 2, 1 ],
                               "target": [ 1, 4, 5, 4, 3 ],
                               "value": [ 4, 2, 3, 1, 2 ]
                             }
                           }
                         ],
                         "layout": {
                           "title": {
                             "text": "Align Nodes (Right)"
                           },
                           "font": {
                             "size": 10
                           }
                         }
                       }`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based answer would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-0127e0"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricprecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M20,10.0519936903668C96.66666666666667,10.0519936903668 96.66666666666667,-1.7053025658242404e-13 173.33333333333334,-1.7053025658242404e-13L173.33333333333334,199.99999999999983C96.66666666666667,199.99999999999983 96.66666666666667,210.0519936903668 20,210.0519936903668Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M193.33333333333334,99.99999999999983C270,99.99999999999983 270,89.44220970652458 346.6666666666667,89.44220970652458L346.6666666666667,189.44220970652458C270,189.44220970652458 270,199.99999999999983 193.33333333333334,199.99999999999983Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M366.6666666666667,89.44220970652458C443.33333333333337,89.44220970652458 443.33333333333337,120.0000000000002 520,120.0000000000002L520,270.0000000000002C443.33333333333337,270.0000000000002 443.33333333333337,239.44220970652458 366.6666666666667,239.44220970652458Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M193.33333333333334,219.9999999999999C270,219.9999999999999 270,189.44220970652458 346.6666666666667,189.44220970652458L346.6666666666667,239.44220970652458C270,239.44220970652458 270,269.9999999999999 193.33333333333334,269.9999999999999Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0px; opacity: 1;" d="M193.33333333333334,-1.7053025658242404e-13C356.6666666666667,-1.7053025658242404e-13 356.6666666666667,1.4210854715202004e-13 520,1.4210854715202004e-13L520,100.00000000000014C356.6666666666667,100.00000000000014 356.6666666666667,99.99999999999983 193.33333333333334,99.99999999999983Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,10.052)" style="opacity: 1;"><rect class="node-rect" width="20" height="199.99999999999994" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,103.49999999999997)">0</text></g><g class="sankey-node" transform="translate(173.333,-0.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="200.00000000000006" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,103.50000000000003)">1</text></g><g class="sankey-node" transform="translate(173.333,220.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="50.000000000000114" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,28.500000000000057)">2</text></g><g class="sankey-node" transform="translate(520.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="100.00000000000006" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,53.50000000000003)">3</text></g><g class="sankey-node" transform="translate(346.667,89.442)" style="opacity: 1;"><rect class="node-rect" width="20" height="150.0000000000001" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,78.50000000000006)">4</text></g><g class="sankey-node" transform="translate(520.000,120.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="149.9999999999998" style="stroke-width: 0.5px; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: rgb(255, 255, 255) 1px 1px 1px, rgb(255, 255, 255) -1px -1px 1px, rgb(255, 255, 255) 1px -1px 1px, rgb(255, 255, 255) -1px 1px 1px; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,78.4999999999999)">5</text></g></g></g><defs id="topdefs-0127e0"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Align Nodes (Right)</text></g><g class="first-render"/></g></svg>

          // Current server response is visually the same.
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-b42a2e"><g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M20,10.0519936903668C96.66666666666667,10.0519936903668 96.66666666666667,-1.7053025658242404e-13 173.33333333333334,-1.7053025658242404e-13L173.33333333333334,199.99999999999983C96.66666666666667,199.99999999999983 96.66666666666667,210.0519936903668 20,210.0519936903668Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M193.33333333333334,99.99999999999983C270,99.99999999999983 270,89.44220970652458 346.6666666666667,89.44220970652458L346.6666666666667,189.44220970652458C270,189.44220970652458 270,199.99999999999983 193.33333333333334,199.99999999999983Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M366.6666666666667,89.44220970652458C443.33333333333337,89.44220970652458 443.33333333333337,120.0000000000002 520,120.0000000000002L520,270.0000000000002C443.33333333333337,270.0000000000002 443.33333333333337,239.44220970652458 366.6666666666667,239.44220970652458Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M193.33333333333334,219.9999999999999C270,219.9999999999999 270,189.44220970652458 346.6666666666667,189.44220970652458L346.6666666666667,239.44220970652458C270,239.44220970652458 270,269.9999999999999 193.33333333333334,269.9999999999999Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M193.33333333333334,-1.7053025658242404e-13C356.6666666666667,-1.7053025658242404e-13 356.6666666666667,1.4210854715202004e-13 520,1.4210854715202004e-13L520,100.00000000000014C356.6666666666667,100.00000000000014 356.6666666666667,99.99999999999983 193.33333333333334,99.99999999999983Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,10.052)" style="opacity: 1;"><rect class="node-rect" width="20" height="199.99999999999994" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,103.49999999999997)">0</text></g><g class="sankey-node" transform="translate(173.333,-0.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="200.00000000000006" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,103.50000000000003)">1</text></g><g class="sankey-node" transform="translate(173.333,220.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="50.000000000000114" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,28.500000000000057)">2</text></g><g class="sankey-node" transform="translate(520.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="100.00000000000006" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,53.50000000000003)">3</text></g><g class="sankey-node" transform="translate(346.667,89.442)" style="opacity: 1;"><rect class="node-rect" width="20" height="150.0000000000001" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,78.50000000000006)">4</text></g><g class="sankey-node" transform="translate(520.000,120.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="149.9999999999998" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,78.4999999999999)">5</text></g></g></g><defs id="topdefs-b42a2e"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Align Nodes (Right)</text></g><g class="first-render"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs') >= 0);
          assert.ok(body.indexOf('<g class="clips"/><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"/><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><g class="sankey" style="box-sizing: content-box; position: absolute; left: 0px; shape-rendering: geometricPrecision; pointer-events: none;" transform="translate(80,100)matrix(1 0 0 1 0 0)"><g class="sankey-links" style="fill: none;"><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M20,10.0519936903668C96.66666666666667,10.0519936903668 96.66666666666667,-1.7053025658242404e-13 173.33333333333334,-1.7053025658242404e-13L173.33333333333334,199.99999999999983C96.66666666666667,199.99999999999983 96.66666666666667,210.0519936903668 20,210.0519936903668Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M193.33333333333334,99.99999999999983C270,99.99999999999983 270,89.44220970652458 346.6666666666667,89.44220970652458L346.6666666666667,189.44220970652458C270,189.44220970652458 270,199.99999999999983 193.33333333333334,199.99999999999983Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M366.6666666666667,89.44220970652458C443.33333333333337,89.44220970652458 443.33333333333337,120.0000000000002 520,120.0000000000002L520,270.0000000000002C443.33333333333337,270.0000000000002 443.33333333333337,239.44220970652458 366.6666666666667,239.44220970652458Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M193.33333333333334,219.9999999999999C270,219.9999999999999 270,189.44220970652458 346.6666666666667,189.44220970652458L346.6666666666667,239.44220970652458C270,239.44220970652458 270,269.9999999999999 193.33333333333334,269.9999999999999Z"/><path class="sankey-link" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(0, 0, 0); fill-opacity: 0.2; stroke-width: 0; opacity: 1;" d="M193.33333333333334,-1.7053025658242404e-13C356.6666666666667,-1.7053025658242404e-13 356.6666666666667,1.4210854715202004e-13 520,1.4210854715202004e-13L520,100.00000000000014C356.6666666666667,100.00000000000014 356.6666666666667,99.99999999999983 193.33333333333334,99.99999999999983Z"/></g><g class="sankey-node-set" style="cursor: move;"><g class="sankey-node" transform="translate(0.000,10.052)" style="opacity: 1;"><rect class="node-rect" width="20" height="199.99999999999994" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(31, 119, 180); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,103.49999999999997)">0</text></g>') > 0);
          assert.ok(body.indexOf('<g class="sankey-node" transform="translate(173.333,-0.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="200.00000000000006" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 127, 14); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,103.50000000000003)">1</text></g><g class="sankey-node" transform="translate(173.333,220.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="50.000000000000114" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(44, 160, 44); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,28.500000000000057)">2</text></g><g class="sankey-node" transform="translate(520.000,0.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="100.00000000000006" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(214, 39, 40); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,53.50000000000003)">3</text></g><g class="sankey-node" transform="translate(346.667,89.442)" style="opacity: 1;"><rect class="node-rect" width="20" height="150.0000000000001" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(148, 103, 189); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="start" transform="translate(23.25,78.50000000000006)">4</text></g><g class="sankey-node" transform="translate(520.000,120.000)" style="opacity: 1;"><rect class="node-rect" width="20" height="149.9999999999998" style="stroke-width: 0.5; stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(140, 86, 75); fill-opacity: 0.8;"/><text class="node-label" style="cursor: default; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; text-shadow: 1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff; white-space: pre;" data-notex="1" x="0" y="0" text-anchor="end" transform="translate(-3.25,78.4999999999999)">5</text></g></g></g><defs id="topdefs') > 0);
          assert.ok(body.indexOf('<g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 14px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="350" y="50" text-anchor="middle" dy="0em">Align Nodes (Right)</text></g><g class="first-render"/></g></svg>') > 0);
        });
      });
    });

/*
    it('request with different data', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      const payload = '{ "x": ["2013-10-04 22:23:00", "2013-11-04 22:23:00", "2013-12-04 22:23:00"], "y": [1, 3, 6], "type": "scatter" }';
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));
          assert.ok(body.indexOf('width="700"') > 0);
          assert.ok(body.indexOf('height="400"') > 0);
        });
      });
    });
    */
  });
});

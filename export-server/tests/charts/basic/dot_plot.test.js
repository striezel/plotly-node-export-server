/*
    Plotly.js offline image export server with Node.js test suite
    Copyright (C) 2024  Dirk Stolle

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

const assert = require('node:assert');
const http = require('node:http');
const { describe, it } = require('node:test');

describe('basic charts, part 6', () => {
  describe('dot plots', () => {
    it('Categorical Dot Plot', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/dot-plots/#categorical-dot-plot example.
      const payload = `{
                         "data": [
                           {
                             "type": "scatter",
                             "x": [ 40, 45.7, 52, 53.6, 54.1, 54.2, 54.5, 54.7, 55.1, 56.6 ],
                             "y": [
                               "Switzerland (2011)", "Chile (2013)", "Japan (2014)", "United States (2012)",
                               "Slovenia (2014)", "Canada (2011)", "Poland (2010)", "Estonia (2015)", "Luxembourg (2013)",
                               "Portugal (2011)"
                             ],
                             "mode": "markers",
                             "name": "Percent of estimated voting age population",
                             "marker": {
                               "color": "rgba(156, 165, 196, 0.95)",
                               "line": {
                                 "color": "rgba(156, 165, 196, 1.0)",
                                 "width": 1
                               },
                               "symbol": "circle",
                               "size": 16
                             }
                           },
                           {
                             "x": [ 49.1, 42, 52.7, 84.3, 51.7, 61.1, 55.3, 64.2, 91.1, 58.9 ],
                             "y": [
                               "Switzerland (2011)", "Chile (2013)", "Japan (2014)", "United States (2012)",
                               "Slovenia (2014)", "Canada (2011)", "Poland (2010)", "Estonia (2015)", "Luxembourg (2013)",
                               "Portugal (2011)"
                             ],
                             "mode": "markers",
                             "name": "Percent of estimated registered voters",
                             "marker": {
                               "color": "rgba(204, 204, 204, 0.95)",
                               "line": {
                                 "color": "rgba(217, 217, 217, 1.0)",
                                 "width": 1
                               },
                               "symbol": "circle",
                               "size": 16
                             }
                           }
                         ],
                         "layout": {
                           "title": {
                             "text": "Votes cast for ten lowest voting age population in OECD countries",
                             "font": {
                               "color": "rgb(204, 204, 204)"
                             }
                           },
                           "xaxis": {
                             "showgrid": false,
                             "showline": true,
                             "linecolor": "rgb(102, 102, 102)",
                             "tickfont": {
                               "font": {
                                 "color": "rgb(102, 102, 102)"
                               }
                             },
                             "tickmode": "linear",
                             "dtick": 10,
                             "ticks": "outside",
                             "tickcolor": "rgb(102, 102, 102)"
                           },
                           "margin": {
                             "l": 140,
                             "r": 40,
                             "b": 50,
                             "t": 80
                           },
                           "legend": {
                             "font": {
                               "size": 10
                             },
                             "yanchor": "middle",
                             "xanchor": "right"
                           },
                           "width": 600,
                           "height": 600,
                           "paper_bgcolor": "rgb(254, 247, 234)",
                           "plot_bgcolor": "rgb(254, 247, 234)",
                           "hovermode": "closest"
                         }
                       }`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based answer would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="600" style="" viewBox="0 0 600 600"><rect x="0" y="0" width="600" height="600" style="fill: rgb(254, 247, 234); fill-opacity: 1;"/><defs id="defs-44d2b5"><g class="clips"><clipPath id="clip44d2b5xyplot" class="plotclip"><rect width="420" height="470"/></clipPath><clipPath class="axesclip" id="clip44d2b5x"><rect x="140" y="0" width="420" height="600"/></clipPath><clipPath class="axesclip" id="clip44d2b5y"><rect x="0" y="80" width="600" height="470"/></clipPath><clipPath class="axesclip" id="clip44d2b5xy"><rect x="140" y="80" width="420" height="470"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"/><g class="y"><path class="ygrid crisp" transform="translate(0,516.5)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,471.72)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,426.94)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,382.17)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,337.39)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,292.61)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,247.83)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,203.06)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,158.28)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,113.5)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(140,80)" clip-path="url(#clip44d2b5xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace607edf" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"/><g class="points"><path class="point" transform="translate(31,436.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(70.93,391.72)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(115.07,346.94)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(126.28,302.17)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(129.78,257.39)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(130.48,212.61)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(132.59,167.83)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(133.99,123.06)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(136.79,78.28)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(147.3,33.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g><g class="text"/></g><g class="trace scatter trace6329b7" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"/><g class="points"><path class="point" transform="translate(94.75,436.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(45.01,391.72)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(119.97,346.94)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(341.36,302.17)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(112.97,257.39)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(178.82,212.61)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(138.19,167.83)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(200.54,123.06)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(389,78.28)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(163.41,33.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(102, 102, 102); stroke-opacity: 1;" d="M140,550.5H560"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(171,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(241.06,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(311.12,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(381.18,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(451.23,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(521.29,0)"/><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(171,0)">40</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(241.06,0)">50</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(311.12,0)">60</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(381.18,0)">70</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(451.23,0)">80</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(521.29,0)">90</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,516.5)">Switzerland (2011)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,471.72)">Chile (2013)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,426.94)">Japan (2014)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,382.17)">United States (2012)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,337.39)">Slovenia (2014)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,292.61)">Canada (2011)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,247.83)">Poland (2010)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,203.06)">Estonia (2015)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,158.28)">Luxembourg (2013)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,113.5)">Portugal (2011)</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-44d2b5"><g class="clips"/><clipPath id="legend44d2b5"><rect width="237" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(331.4000000000001,56)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(254, 247, 234); fill-opacity: 1; stroke-width: 0px;" width="237" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend44d2b5)"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="3.9">Percent of estimated voting age population</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="231.71665954589844" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="3.9">Percent of estimated registered voters</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="231.71665954589844" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 17px; fill: rgb(204, 204, 204); fill-opacity: 1; white-space: pre;" x="300" y="40" text-anchor="middle" dy="0em">Votes cast for ten lowest voting age population in OECD countries</text></g><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="600" style="" viewBox="0 0 600 600"><rect x="0" y="0" width="600" height="600" style="fill: rgb(254, 247, 234); fill-opacity: 1;"/><defs id="defs-423341"><g class="clips"><clipPath id="clip423341xyplot" class="plotclip"><rect width="420" height="470"/></clipPath><clipPath class="axesclip" id="clip423341x"><rect x="140" y="0" width="420" height="600"/></clipPath><clipPath class="axesclip" id="clip423341y"><rect x="0" y="80" width="600" height="470"/></clipPath><clipPath class="axesclip" id="clip423341xy"><rect x="140" y="80" width="420" height="470"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"/><g class="y"><path class="ygrid crisp" transform="translate(0,516.5)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,471.72)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,426.94)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,382.17)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,337.39)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,292.61)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,247.83)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,203.06)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,158.28)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,113.5)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(140,80)" clip-path="url(#clip423341xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace986565" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"/><g class="points"><path class="point" transform="translate(31,436.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(70.93,391.72)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(115.07,346.94)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(126.28,302.17)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(129.78,257.39)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(130.48,212.61)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(132.59,167.83)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(133.99,123.06)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(136.79,78.28)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(147.3,33.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g><g class="text"/></g><g class="trace scatter trace686786" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"/><g class="points"><path class="point" transform="translate(94.75,436.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(45.01,391.72)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(119.97,346.94)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(341.36,302.17)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(112.97,257.39)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(178.82,212.61)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(138.19,167.83)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(200.54,123.06)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(389,78.28)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(163.41,33.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(102, 102, 102); stroke-opacity: 1;" d="M140,550.5H560"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(171,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(241.06,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(311.12,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(381.18,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(451.23,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(521.29,0)"/><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(171,0)">40</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(241.06,0)">50</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(311.12,0)">60</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(381.18,0)">70</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(451.23,0)">80</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(521.29,0)">90</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,516.5)">Switzerland (2011)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,471.72)">Chile (2013)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,426.94)">Japan (2014)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,382.17)">United States (2012)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,337.39)">Slovenia (2014)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,292.61)">Canada (2011)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,247.83)">Poland (2010)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,203.06)">Estonia (2015)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,158.28)">Luxembourg (2013)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,113.5)">Portugal (2011)</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-423341"><g class="clips"/><clipPath id="legend423341"><rect width="45" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(523.4000000000001,56)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(254, 247, 234); fill-opacity: 1; stroke-width: 0px;" width="45" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend423341)"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="3.9">Percent of estimated voting age population</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="3.9">Percent of estimated registered voters</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 17px; fill: rgb(204, 204, 204); fill-opacity: 1; white-space: pre;" x="300" y="40" text-anchor="middle" dy="0em">Votes cast for ten lowest voting age population in OECD countries</text></g><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="600" style="" viewBox="0 0 600 600"><rect x="0" y="0" width="600" height="600" style="fill: rgb(254, 247, 234); fill-opacity: 1;"/><defs id="defs') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="420" height="470"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="140" y="0" width="420" height="600"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="80" width="600" height="470"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="140" y="80" width="420" height="470"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"/><g class="y"><path class="ygrid crisp" transform="translate(0,516.5)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,471.72)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,426.94)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,382.17)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,337.39)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,292.61)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,247.83)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,203.06)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,158.28)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,113.5)" d="M140,0h420" style="stroke: rgb(237, 231, 219); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(140,80)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"/><g class="points"><path class="point" transform="translate(31,436.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(70.93,391.72)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(115.07,346.94)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(126.28,302.17)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(129.78,257.39)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(130.48,212.61)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(132.59,167.83)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(133.99,123.06)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(136.79,78.28)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(147.3,33.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g><g class="text"/></g><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"/><g class="points"><path class="point" transform="translate(94.75,436.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(45.01,391.72)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(119.97,346.94)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(341.36,302.17)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(112.97,257.39)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(178.82,212.61)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/>') > 0);
          assert.ok(body.indexOf('<path class="point" transform="translate(138.19,167.83)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(200.54,123.06)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(389,78.28)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/><path class="point" transform="translate(163.41,33.5)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none; stroke-width: 1px; stroke: rgb(102, 102, 102); stroke-opacity: 1;" d="M140,550.5H560"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(171,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(241.06,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(311.12,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(381.18,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(451.23,0)"/><path class="xtick ticks crisp" style="stroke: rgb(102, 102, 102); stroke-opacity: 1; stroke-width: 1px;" d="M0,551v5" transform="translate(521.29,0)"/><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(171,0)">40</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(241.06,0)">50</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(311.12,0)">60</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(381.18,0)">70</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(451.23,0)">80</text></g><g class="xtick"><text text-anchor="middle" x="0" y="570.4" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(521.29,0)">90</text></g></g>') > 0);
          assert.ok(body.indexOf('<g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,516.5)">Switzerland (2011)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,471.72)">Chile (2013)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,426.94)">Japan (2014)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,382.17)">United States (2012)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,337.39)">Slovenia (2014)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,292.61)">Canada (2011)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,247.83)">Poland (2010)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,203.06)">Estonia (2015)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,158.28)">Luxembourg (2013)</text></g><g class="ytick"><text text-anchor="end" x="139" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,113.5)">Portugal (2011)</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/><clipPath id="legend') > 0);
          assert.ok(body.indexOf('"><rect width="45" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(523.4000000000001,56)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(254, 247, 234); fill-opacity: 1; stroke-width: 0px;" width="45" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend') > 0);
          assert.ok(body.indexOf(')"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="3.9">Percent of estimated voting age population</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 1px; fill: rgb(156, 165, 196); fill-opacity: 0.95; stroke: rgb(156, 165, 196); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 10px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="3.9">Percent of estimated registered voters</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 1px; fill: rgb(204, 204, 204); fill-opacity: 0.95; stroke: rgb(217, 217, 217); stroke-opacity: 1;" d="M8,0A8,8 0 1,1 0,-8A8,8 0 0,1 8,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"><text class="gtitle" style="opacity: 1; font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 17px; fill: rgb(204, 204, 204); fill-opacity: 1; white-space: pre;" x="300" y="40" text-anchor="middle" dy="0em">Votes cast for ten lowest voting age population in OECD countries</text></g><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });
  });
});

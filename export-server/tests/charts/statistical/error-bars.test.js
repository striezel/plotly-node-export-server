/*
    Plotly.js offline image export server with Node.js test suite
    Copyright (C) 2025  Dirk Stolle

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

const assert = require('node:assert');
const http = require('node:http');
const { describe, it } = require('node:test');

describe('statistical charts, part 1', () => {
  describe('error bars', () => {
    it('Basic Symmetric Error Bars', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/error-bars/#basic-symmetric-error-bars example.
      const payload = `[
                         {
                           "x": [ 0, 1, 2 ],
                           "y": [ 6, 10, 2 ],
                           "error_y": {
                             "type": "data",
                             "array": [ 1, 2, 3 ],
                             "visible": true
                           },
                           "type": "scatter"
                         }
                       ]`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based answer would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-3ddebe"><g class="clips"><clipPath id="clip3ddebexyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip3ddebex"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip3ddebey"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip3ddebexy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(230.37,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(469.62,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,217.62)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,141.46)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,293.77)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip3ddebexyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace290a75" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,87.15h8m-4,0V117.62m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M266,11h8m-4,0V71.92m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,117.62h8m-4,0V209m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,102.38L270,41.46L509.25,163.31"/></g><g class="points"><path class="point" transform="translate(30.75,102.38)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(270,41.46)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,163.31)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(230.37,0)">0.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(469.62,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">2</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,293.77)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,217.62)">5</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,141.46)">10</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-3ddebe"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is the same, except for random ids.

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(230.37,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(469.62,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,217.62)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,141.46)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,293.77)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,87.15h8m-4,0V117.62m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M266,11h8m-4,0V71.92m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,117.62h8m-4,0V209m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,102.38L270,41.46L509.25,163.31"/></g><g class="points"><path class="point" transform="translate(30.75,102.38)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(270,41.46)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,163.31)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(230.37,0)">0.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(469.62,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">2</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,293.77)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,217.62)">5</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,141.46)">10</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });

    it('Bar Chart with Error Bars', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/error-bars/#bar-chart-with-error-bars example.
      const payload = `{
                         "data": [
                           {
                             "x": [ "Trial 1", "Trial 2", "Trial 3" ],
                             "y": [ 3, 6, 4 ],
                             "name": "Control",
                             "error_y": {
                               "type": "data",
                               "array": [ 1, 0.5, 1.5 ],
                               "visible": true
                             },
                             "type": "bar"
                           },
                           {
                             "x": [ "Trial 1", "Trial 2", "Trial 3" ],
                             "y": [ 4, 7, 3 ],
                             "name": "Experimental",
                             "error_y": {
                               "type": "data",
                               "array": [ 0.5, 1, 2 ],
                               "visible": true
                             },
                             "type": "bar"
                           }
                         ],
                         "layout": {
                           "barmode": "group"
                         }
                       }`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based output would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-35ec0a"><g class="clips"><clipPath id="clip35ec0axyplot" class="plotclip"><rect width="481" height="270"/></clipPath><clipPath class="axesclip" id="clip35ec0ax"><rect x="80" y="0" width="481" height="450"/></clipPath><clipPath class="axesclip" id="clip35ec0ay"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clip35ec0axy"><rect x="80" y="100" width="481" height="270"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"/><g class="y"><path class="ygrid crisp" transform="translate(0,305.88)" d="M80,0h481" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,241.75)" d="M80,0h481" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,177.63)" d="M80,0h481" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,113.5)" d="M80,0h481" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="yzl zl crisp" transform="translate(0,370)" d="M80,0h481" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip35ec0axyplot)"><g class="barlayer mlayer"><g class="trace bars" style="opacity: 1;"><g class="points"><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M16.03,270V173.81H80.17V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M176.37,270V77.63H240.5V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M336.7,270V141.75H400.83V270Z"/></g></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M44.1,141.75h8m-4,0V205.88m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M204.43,61.59h8m-4,0V93.66m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M364.77,93.66h8m-4,0V189.84m-4,0h8"/></g></g><g class="trace bars" style="opacity: 1;"><g class="points"><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M80.17,270V141.75H144.3V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M240.5,270V45.56H304.63V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M400.83,270V173.81H464.97V270Z"/></g></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M108.23,125.72h8m-4,0V157.78m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M268.57,13.5h8m-4,0V77.63m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M428.9,109.69h8m-4,0V237.94m-4,0h8"/></g></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(160.17000000000002,0)">Trial 1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(320.5,0)">Trial 2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(480.83,0)">Trial 3</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,370)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,305.88)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,241.75)">4</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,177.63)">6</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,113.5)">8</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-35ec0a"><g class="clips"/><clipPath id="legend35ec0a"><rect width="117" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(570.62,100)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 1; stroke-width: 0px;" width="117" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend35ec0a)"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">Control</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="legendundefined" d="M6,6H-6V-6H6Z" transform="translate(20,0)" style="stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="112" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">Experimental</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="legendundefined" d="M6,6H-6V-6H6Z" transform="translate(20,0)" style="stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="112" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-11e266"><g class="clips"><clipPath id="clip11e266xyplot" class="plotclip"><rect width="540" height="270"/></clipPath><clipPath class="axesclip" id="clip11e266x"><rect x="80" y="0" width="540" height="450"/></clipPath><clipPath class="axesclip" id="clip11e266y"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clip11e266xy"><rect x="80" y="100" width="540" height="270"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"/><g class="y"><path class="ygrid crisp" transform="translate(0,305.88)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,241.75)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,177.63)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,113.5)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="yzl zl crisp" transform="translate(0,370)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip11e266xyplot)"><g class="barlayer mlayer"><g class="trace bars" style="opacity: 1;"><g class="points"><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M18,270V173.81H90V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M198,270V77.63H270V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M378,270V141.75H450V270Z"/></g></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M50,141.75h8m-4,0V205.88m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M230,61.59h8m-4,0V93.66m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M410,93.66h8m-4,0V189.84m-4,0h8"/></g></g><g class="trace bars" style="opacity: 1;"><g class="points"><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M90,270V141.75H162V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M270,270V45.56H342V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M450,270V173.81H522V270Z"/></g></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M122,125.72h8m-4,0V157.78m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M302,13.5h8m-4,0V77.63m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M482,109.69h8m-4,0V237.94m-4,0h8"/></g></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(170,0)">Trial 1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">Trial 2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(530,0)">Trial 3</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,370)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,305.88)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,241.75)">4</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,177.63)">6</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,113.5)">8</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-11e266"><g class="clips"/><clipPath id="legend11e266"><rect width="45" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(630.8,100)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 1; stroke-width: 0px;" width="45" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend11e266)"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">Control</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="legendundefined" d="M6,6H-6V-6H6Z" transform="translate(20,0)" style="stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">Experimental</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="legendundefined" d="M6,6H-6V-6H6Z" transform="translate(20,0)" style="stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="270"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="450"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="270"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"/><g class="y"><path class="ygrid crisp" transform="translate(0,305.88)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,241.75)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,177.63)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,113.5)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="yzl zl crisp" transform="translate(0,370)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="barlayer mlayer"><g class="trace bars" style="opacity: 1;"><g class="points"><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M18,270V173.81H90V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M198,270V77.63H270V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M378,270V141.75H450V270Z"/></g></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M50,141.75h8m-4,0V205.88m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M230,61.59h8m-4,0V93.66m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M410,93.66h8m-4,0V189.84m-4,0h8"/></g></g><g class="trace bars" style="opacity: 1;"><g class="points"><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M90,270V141.75H162V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M270,270V45.56H342V270Z"/></g><g class="point"><path style="vector-effect: none; opacity: 1; stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;" d="M450,270V173.81H522V270Z"/></g></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M122,125.72h8m-4,0V157.78m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M302,13.5h8m-4,0V77.63m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(68, 68, 68); stroke-opacity: 1;" class="yerror" d="M482,109.69h8m-4,0V237.94m-4,0h8"/></g></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(170,0)">Trial 1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">Trial 2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(530,0)">Trial 3</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,370)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,305.88)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,241.75)">4</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,177.63)">6</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,113.5)">8</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/><clipPath id="legend') > 0);
          assert.ok(body.indexOf('"><rect width="45" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(630.8,100)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 1; stroke-width: 0px;" width="45" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend') > 0);
          assert.ok(body.indexOf(')"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">Control</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="legendundefined" d="M6,6H-6V-6H6Z" transform="translate(20,0)" style="stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">Experimental</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="legendundefined" d="M6,6H-6V-6H6Z" transform="translate(20,0)" style="stroke-width: 0px; fill: rgb(255, 127, 14); fill-opacity: 1;"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });

    it('Horizontal Error Bars', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/error-bars/#horizontal-error-bars example.
      const payload = `[
                         {
                           "x": [ 1, 2, 3, 4 ],
                           "y": [ 2, 1, 3, 4 ],
                           "error_x": {
                             "type": "percent",
                             "value": 10
                           },
                           "type": "scatter"
                         }
                       ]`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based output would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-ad7013"><g class="clips"><clipPath id="clipad7013xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clipad7013x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clipad7013y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clipad7013xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(120.89,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(259.74,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(398.6,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(537.46,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,305.25)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,241.75)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,178.25)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,114.75)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clipad7013xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter tracec1c2c5" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M54.77,137.75v8m0,-4H27m0,-4v8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M207.51,201.25v8m0,-4H151.97m0,-4v8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M360.26,74.25v8m0,-4H276.94m0,-4v8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M513,10.75v8m0,-4H401.91m0,-4v8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M40.89,141.75L179.74,205.25L318.6,78.25L457.46,14.75"/></g><g class="points"><path class="point" transform="translate(40.89,141.75)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(179.74,205.25)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(318.6,78.25)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(457.46,14.75)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(120.89,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(259.74,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(398.6,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(537.46,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,305.25)">1</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,241.75)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,178.25)">3</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,114.75)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-ad7013"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is the same, except for random ids.

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(120.89,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(259.74,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(398.6,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(537.46,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,305.25)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,241.75)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,178.25)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,114.75)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M54.77,137.75v8m0,-4H27m0,-4v8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M207.51,201.25v8m0,-4H151.97m0,-4v8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M360.26,74.25v8m0,-4H276.94m0,-4v8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="xerror" d="M513,10.75v8m0,-4H401.91m0,-4v8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M40.89,141.75L179.74,205.25L318.6,78.25L457.46,14.75"/></g><g class="points"><path class="point" transform="translate(40.89,141.75)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(179.74,205.25)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(318.6,78.25)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(457.46,14.75)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(120.89,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(259.74,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(398.6,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(537.46,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,305.25)">1</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,241.75)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,178.25)">3</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,114.75)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });

    it('Asymmetric Error Bars', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/error-bars/#asymmetric-error-bars example.
      const payload = `[
                         {
                           "x": [ 1, 2, 3, 4 ],
                           "y": [ 2, 1, 3, 4 ],
                           "error_y": {
                             "type": "data",
                             "symmetric": false,
                             "array": [ 0.1, 0.2, 0.1, 0.1 ],
                             "arrayminus": [ 0.2, 0.4, 1, 0.2 ]
                           },
                           "type": "scatter"
                         }
                       ]`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based output would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-2b1cb4"><g class="clips"><clipPath id="clip2b1cb4xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip2b1cb4x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip2b1cb4y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip2b1cb4xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(190.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(270.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(429.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(509.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,286.37)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,229.8)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,173.23000000000002)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,116.66)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip2b1cb4xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace7008e4" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,124.14h8m-4,0V141.11m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M186.25,175.06h8m-4,0V209m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M345.75,67.57h8m-4,0V129.8m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,11h8m-4,0V27.97m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,129.8L190.25,186.37L349.75,73.23L509.25,16.66"/></g><g class="points"><path class="point" transform="translate(30.75,129.8)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(190.25,186.37)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(349.75,73.23)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,16.66)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(190.5,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(270.25,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">2.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(429.75,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(509.5,0)">3.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,286.37)">1</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,229.8)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,173.23000000000002)">3</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,116.66)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-2b1cb4"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is the same, except for random ids.

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(190.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(270.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(429.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(509.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,286.37)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,229.8)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,173.23000000000002)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,116.66)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,124.14h8m-4,0V141.11m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M186.25,175.06h8m-4,0V209m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M345.75,67.57h8m-4,0V129.8m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,11h8m-4,0V27.97m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,129.8L190.25,186.37L349.75,73.23L509.25,16.66"/></g><g class="points"><path class="point" transform="translate(30.75,129.8)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(190.25,186.37)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(349.75,73.23)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,16.66)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(190.5,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(270.25,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">2.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(429.75,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(509.5,0)">3.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,286.37)">1</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,229.8)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,173.23000000000002)">3</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,116.66)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });

    it('Colored and Styled Error Bars', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST',
        headers: {
          'X-Image-Width': '700',
          'X-Image-Height': '450'
        }
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/error-bars/#colored-and-styled-error-bars example.
      const payload = `[
                         {
                           "x": [ -4, -3.5789473684210527, -3.1578947368421053, -2.736842105263158,
                                  -2.3157894736842106, -1.8947368421052633, -1.473684210526316,
                                  -1.0526315789473686, -0.6315789473684212, -0.2105263157894739,
                                   0.21052631578947345, 0.6315789473684212, 1.0526315789473681,
                                   1.473684210526316, 1.8947368421052628, 2.3157894736842106,
                                   2.7368421052631575, 3.1578947368421053, 3.578947368421052, 4 ],
                           "y": null,
                           "name": "sinc(x)",
                           "type": "scatter"
                         },
                         {
                           "x": [ -3.8, -3.03, -1.91, -1.46, -0.89, -0.24, 0, 0.41, 0.89, 1.01,
                                  1.91, 2.28, 2.79, 3.56 ],
                           "y": [ -0.02, 0.04, -0.01, -0.27, 0.36, 0.75, 1.03, 0.65, 0.28, 0.02, -0.11, 0.16, 0.04, -0.15 ],
                           "mode": "markers",
                           "name": "measured",
                           "error_y": {
                             "type": "constant",
                             "value": 0.1,
                             "color": "#85144B",
                             "thickness": 1.5,
                             "width": 3
                           },
                           "error_x": {
                             "type": "constant",
                             "value": 0.2,
                             "color": "#85144B",
                             "thickness": 1.5,
                             "width": 3
                           },
                           "marker": {
                             "color": "#85144B",
                             "size": 8
                           },
                           "type": "scatter"
                         }
                       ]`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based output would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-fdfbc3"><g class="clips"><clipPath id="clipfdfbc3xyplot" class="plotclip"><rect width="497" height="270"/></clipPath><clipPath class="axesclip" id="clipfdfbc3x"><rect x="80" y="0" width="497" height="450"/></clipPath><clipPath class="axesclip" id="clipfdfbc3y"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clipfdfbc3xy"><rect x="80" y="100" width="497" height="270"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(104.85,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(220.13,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(450.7,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(565.98,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,286.40999999999997)" d="M80,0h497" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,224.66)" d="M80,0h497" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,162.9)" d="M80,0h497" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,101.15)" d="M80,0h497" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(335.41999999999996,0)" d="M0,100v270" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,348.16999999999996)" d="M80,0h497" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clipfdfbc3xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter tracee9c522" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M24.85,248.17L485.98,13.5"/></g><g class="points"/><g class="text"/></g><g class="trace scatter traced8fb21" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M33.38,247.18h6m-3,0V249.65m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M47.91,245.41v6m0,-3H24.85m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M77.76,246.44h6m-3,0V248.91m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M92.29,244.67v6m0,-3H69.23m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M142.32,247.05h6m-3,0V249.52m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M156.85,245.29v6m0,-3H133.79m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M168.26,250.26h6m-3,0V252.74m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M182.79,248.5v6m0,-3H159.73m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M201.12,242.48h6m-3,0V244.95m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M215.64,240.72v6m0,-3H192.59m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M238.58,237.67h6m-3,0V240.14m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M253.11,235.9v6m0,-3H230.05m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M252.42,234.21h6m-3,0V236.68m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M266.95,232.44v6m0,-3H243.89m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M276.05,238.9h6m-3,0V241.37m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M290.58,237.14v6m0,-3H267.52m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M303.72,243.47h6m-3,0V245.94m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M318.25,241.71v6m0,-3H295.19m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M310.64,246.68h6m-3,0V249.15m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M325.16,244.92v6m0,-3H302.11m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M362.51,248.29h6m-3,0V250.76m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M377.04,246.52v6m0,-3H353.98m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M383.84,244.95h6m-3,0V247.42m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M398.37,243.19v6m0,-3H375.31m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M413.24,246.44h6m-3,0V248.91m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M427.77,244.67v6m0,-3H404.71m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M457.62,248.78h6m-3,0V251.25m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M472.15,247.02v6m0,-3H449.09m0,-3v6"/></g></g><g class="lines"/><g class="points"><path class="point" transform="translate(36.38,248.41)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(80.76,247.67)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(145.32,248.29)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(171.26,251.5)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(204.12,243.72)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(241.58,238.9)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(255.42,235.44)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(279.05,240.14)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(306.72,244.71)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(313.64,247.92)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(365.51,249.52)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(386.84,246.19)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(416.24,247.67)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(460.62,250.02)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(104.85,0)">−4</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(220.13,0)">−2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(335.41999999999996,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(450.7,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(565.98,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,348.16999999999996)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,286.40999999999997)">5</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,224.66)">10</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,162.9)">15</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,101.15)">20</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-fdfbc3"><g class="clips"/><clipPath id="legendfdfbc3"><rect width="101" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(586.94,100)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 1; stroke-width: 0px;" width="101" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legendfdfbc3)"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">sinc(x)</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"><path class="js-line" d="M5,0h30" style="fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px;"/></g><g class="legendsymbols"><g class="legendpoints"/></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="95.33332824707031" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">measured</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="95.33332824707031" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-4bfb1c"><g class="clips"><clipPath id="clip4bfb1cxyplot" class="plotclip"><rect width="540" height="270"/></clipPath><clipPath class="axesclip" id="clip4bfb1cx"><rect x="80" y="0" width="540" height="450"/></clipPath><clipPath class="axesclip" id="clip4bfb1cy"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clip4bfb1cxy"><rect x="80" y="100" width="540" height="270"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(107,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(232.26,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(482.77,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(608.03,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,286.40999999999997)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,224.66)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,162.9)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,101.15)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(357.52,0)" d="M0,100v270" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,348.16999999999996)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip4bfb1cxyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace421a09" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M27,248.17L528.03,13.5"/></g><g class="points"/><g class="text"/></g><g class="trace scatter tracea06204" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M36.53,247.18h6m-3,0V249.65m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M52.05,245.41v6m0,-3H27m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M84.75,246.44h6m-3,0V248.91m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M100.28,244.67v6m0,-3H75.22m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M154.89,247.05h6m-3,0V249.52m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M170.42,245.29v6m0,-3H145.37m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M183.08,250.26h6m-3,0V252.74m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M198.6,248.5v6m0,-3H173.55m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M218.78,242.48h6m-3,0V244.95m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M234.3,240.72v6m0,-3H209.25m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M259.48,237.67h6m-3,0V240.14m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M275.01,235.9v6m0,-3H249.96m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M274.52,234.21h6m-3,0V236.68m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M290.04,232.44v6m0,-3H264.99m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M300.19,238.9h6m-3,0V241.37m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M315.72,237.14v6m0,-3H290.67m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M330.26,243.47h6m-3,0V245.94m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M345.78,241.71v6m0,-3H320.73m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M337.77,246.68h6m-3,0V249.15m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M353.3,244.92v6m0,-3H328.24m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M394.14,248.29h6m-3,0V250.76m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M409.66,246.52v6m0,-3H384.61m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M417.31,244.95h6m-3,0V247.42m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M432.84,243.19v6m0,-3H407.78m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M449.25,246.44h6m-3,0V248.91m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M464.78,244.67v6m0,-3H439.72m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M497.47,248.78h6m-3,0V251.25m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M513,247.02v6m0,-3H487.95m0,-3v6"/></g></g><g class="lines"/><g class="points"><path class="point" transform="translate(39.53,248.41)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(87.75,247.67)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(157.89,248.29)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(186.08,251.5)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(221.78,243.72)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(262.48,238.9)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(277.52,235.44)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(303.19,240.14)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(333.26,244.71)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(340.77,247.92)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(397.14,249.52)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(420.31,246.19)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(452.25,247.67)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(500.47,250.02)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(107,0)">−4</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(232.26,0)">−2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(357.52,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(482.77,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(608.03,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,348.16999999999996)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,286.40999999999997)">5</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,224.66)">10</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,162.9)">15</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,101.15)">20</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-4bfb1c"><g class="clips"/><clipPath id="legend4bfb1c"><rect width="45" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(630.8,100)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 1; stroke-width: 0px;" width="45" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend4bfb1c)"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">sinc(x)</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"><path class="js-line" d="M5,0h30" style="fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px;"/></g><g class="legendsymbols"><g class="legendpoints"/></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: 'Open Sans', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">measured</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="450" style="" viewBox="0 0 700 450"><rect x="0" y="0" width="700" height="450" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="270"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="450"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="270"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="270"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(107,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(232.26,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(482.77,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(608.03,0)" d="M0,100v270" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,286.40999999999997)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,224.66)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,162.9)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,101.15)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(357.52,0)" d="M0,100v270" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/><path class="yzl zl crisp" transform="translate(0,348.16999999999996)" d="M80,0h540" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"/><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M27,248.17L528.03,13.5"/></g><g class="points"/><g class="text"/></g><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M36.53,247.18h6m-3,0V249.65m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M52.05,245.41v6m0,-3H27m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M84.75,246.44h6m-3,0V248.91m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M100.28,244.67v6m0,-3H75.22m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M154.89,247.05h6m-3,0V249.52m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M170.42,245.29v6m0,-3H145.37m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M183.08,250.26h6m-3,0V252.74m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M198.6,248.5v6m0,-3H173.55m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M218.78,242.48h6m-3,0V244.95m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M234.3,240.72v6m0,-3H209.25m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M259.48,237.67h6m-3,0V240.14m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M275.01,235.9v6m0,-3H249.96m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M274.52,234.21h6m-3,0V236.68m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M290.04,232.44v6m0,-3H264.99m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M300.19,238.9h6m-3,0V241.37m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M315.72,237.14v6m0,-3H290.67m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M330.26,243.47h6m-3,0V245.94m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M345.78,241.71v6m0,-3H320.73m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M337.77,246.68h6m-3,0V249.15m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M353.3,244.92v6m0,-3H328.24m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M394.14,248.29h6m-3,0V250.76m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M409.66,246.52v6m0,-3H384.61m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M417.31,244.95h6m-3,0V247.42m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M432.84,243.19v6m0,-3H407.78m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M449.25,246.44h6m-3,0V248.91m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M464.78,244.67v6m0,-3H439.72m0,-3v6"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="yerror" d="M497.47,248.78h6m-3,0V251.25m-3,0h6"/><path style="vector-effect: none; stroke-width: 1.5px; stroke: rgb(133, 20, 75); stroke-opacity: 1;" class="xerror" d="M513,247.02v6m0,-3H487.95m0,-3v6"/></g></g><g class="lines"/><g class="points"><path class="point" transform="translate(39.53,248.41)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(87.75,247.67)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(157.89,248.29)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(186.08,251.5)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(221.78,243.72)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(262.48,238.9)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(277.52,235.44)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(303.19,240.14)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(333.26,244.71)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(340.77,247.92)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(397.14,249.52)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(420.31,246.19)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(452.25,247.67)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/><path class="point" transform="translate(500.47,250.02)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(107,0)">−4</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(232.26,0)">−2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(357.52,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(482.77,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="383" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(608.03,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,348.16999999999996)">0</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,286.40999999999997)">5</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,224.66)">10</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,162.9)">15</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,101.15)">20</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/><clipPath id="legend') > 0);
          assert.ok(body.indexOf('"><rect width="45" height="48" x="0" y="0"/></clipPath></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="legend" pointer-events="all" transform="translate(630.8,100)"><rect class="bg" shape-rendering="crispEdges" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; fill: rgb(255, 255, 255); fill-opacity: 1; stroke-width: 0px;" width="45" height="48" x="0" y="0"/><g class="scrollbox" transform="" clip-path="url(#legend') > 0);
          assert.ok(body.indexOf(')"><g class="groups"><g class="traces" style="opacity: 1;" transform="translate(0,14.5)"><text class="legendtext" text-anchor="start" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">sinc(x)</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"><path class="js-line" d="M5,0h30" style="fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px;"/></g><g class="legendsymbols"><g class="legendpoints"/></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g><g class="traces" style="opacity: 1;" transform="translate(0,33.5)"><text class="legendtext" text-anchor="start" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre;" x="40" y="4.680000000000001">measured</text><g class="layers" style="opacity: 1;"><g class="legendfill"/><g class="legendlines"/><g class="legendsymbols"><g class="legendpoints"><path class="scatterpts" transform="translate(20,0)" style="opacity: 1; stroke-width: 0px; fill: rgb(133, 20, 75); fill-opacity: 1;" d="M4,0A4,4 0 1,1 0,-4A4,4 0 0,1 4,0Z"/></g></g></g><rect class="legendtoggle" style="fill: rgb(0, 0, 0); fill-opacity: 0;" x="0" y="-9.5" width="40" height="19"/></g></g></g><rect class="scrollbar" rx="20" ry="3" width="0" height="0" style="fill: rgb(128, 139, 164); fill-opacity: 1;" x="0" y="0"/></g><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });

    it('Error Bars as a Percentage of the y-Value', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/error-bars/#error-bars-as-a-percentage-of-the-yvalue example.
      const payload = `[
                         {
                           "x": [ 0, 1, 2 ],
                           "y": [ 6, 10, 2 ],
                           "error_y": {
                             "type": "percent",
                             "value": 50,
                             "visible": true
                           },
                           "type": "scatter"
                         }
                       ]`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based output would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-e75a7e"><g class="clips"><clipPath id="clipe75a7exyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clipe75a7ex"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clipe75a7ey"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clipe75a7exy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(230.37,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(469.62,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,252.43)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,181.70999999999998)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,111)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clipe75a7exyplot)"><g class="scatterlayer mlayer"><g class="trace scatter tracedf09f1" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,95.86h8m-4,0V180.71m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M266,11h8m-4,0V152.43m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,180.71h8m-4,0V209m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,138.29L270,81.71L509.25,194.86"/></g><g class="points"><path class="point" transform="translate(30.75,138.29)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(270,81.71)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,194.86)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(230.37,0)">0.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(469.62,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">2</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,252.43)">5</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,181.70999999999998)">10</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,111)">15</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-e75a7e"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is the same, except for random ids.

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(230.37,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(469.62,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,252.43)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,181.70999999999998)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,111)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"><path class="xzl zl crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(68, 68, 68); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,95.86h8m-4,0V180.71m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M266,11h8m-4,0V152.43m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,180.71h8m-4,0V209m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,138.29L270,81.71L509.25,194.86"/></g><g class="points"><path class="point" transform="translate(30.75,138.29)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(270,81.71)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,194.86)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">0</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(230.37,0)">0.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(469.62,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">2</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,252.43)">5</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,181.70999999999998)">10</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,111)">15</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });

    it('Asymmetric Error Bars with a Constant Offset', () => {
      const options = {
        port: 3000,
        host: 'localhost',
        method: 'POST'
      };

      const req = http.request(options);
      // Data taken from https://plotly.com/javascript/error-bars/#asymmetric-error-bars-with-a-constant-offset example.
      const payload = `[
                         {
                           "x": [ 1, 2, 3, 4 ],
                           "y": [ 2, 1, 3, 4 ],
                           "error_y": {
                             "type": "percent",
                             "symmetric": false,
                             "value": 15,
                             "valueminus": 25
                           },
                           "type": "scatter"
                         }
                       ]`;
      req.write(payload);
      req.end();

      req.on('response', (response) => {
        assert.strictEqual(200, response.statusCode);
        let body = '';
        response.on('data', (chunk) => {
          body += chunk;
        });
        response.on('end', () => {
          assert.ok(body.startsWith('<svg'));
          assert.ok(body.endsWith('</svg>'));

          // Browser-based output would be something like
          // <svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-01db76"><g class="clips"><clipPath id="clip01db76xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip01db76x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip01db76y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip01db76xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(190.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(270.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(429.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(509.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,296.14)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,244.71)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,193.29000000000002)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,141.86)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip01db76xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace53ffad" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,129.29h8m-4,0V170.43m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M186.25,188.43h8m-4,0V209m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M345.75,70.14h8m-4,0V131.86m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,11h8m-4,0V93.29m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,144.71L190.25,196.14L349.75,93.29L509.25,41.86"/></g><g class="points"><path class="point" transform="translate(30.75,144.71)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(190.25,196.14)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(349.75,93.29)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,41.86)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(190.5,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(270.25,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">2.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(429.75,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(509.5,0)">3.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,296.14)">1</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,244.71)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,193.29000000000002)">3</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: TOBESTRIPPEDOpen SansTOBESTRIPPED, verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,141.86)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-01db76"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>

          // Current server response is identical, except for random ids.

          // Check partial matches, avoiding the random id bits.
          assert.ok(body.indexOf('<svg class="main-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="700" height="400" style="" viewBox="0 0 700 400"><rect x="0" y="0" width="700" height="400" style="fill: rgb(255, 255, 255); fill-opacity: 1;"/><defs id="defs-') >= 0);
          assert.ok(body.indexOf('<g class="clips"><clipPath id="clip') > 0);
          assert.ok(body.indexOf('xyplot" class="plotclip"><rect width="540" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('x"><rect x="80" y="0" width="540" height="400"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('y"><rect x="0" y="100" width="700" height="220"/></clipPath><clipPath class="axesclip" id="clip') > 0);
          assert.ok(body.indexOf('xy"><rect x="80" y="100" width="540" height="220"/></clipPath></g><g class="gradients"/><g class="patterns"/></defs><g class="bglayer"/><g class="layer-below"><g class="imagelayer"/><g class="shapelayer"/></g><g class="cartesianlayer"><g class="subplot xy"><g class="layer-subplot"><g class="shapelayer"/><g class="imagelayer"/></g><g class="minor-gridlayer"><g class="x"/><g class="y"/></g><g class="gridlayer"><g class="x"><path class="xgrid crisp" transform="translate(110.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(190.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(270.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(350,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(429.75,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(509.5,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="xgrid crisp" transform="translate(589.25,0)" d="M0,100v220" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g><g class="y"><path class="ygrid crisp" transform="translate(0,296.14)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,244.71)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,193.29000000000002)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/><path class="ygrid crisp" transform="translate(0,141.86)" d="M80,0h540" style="stroke: rgb(238, 238, 238); stroke-opacity: 1; stroke-width: 1px;"/></g></g><g class="zerolinelayer"/><g class="layer-between"><g class="shapelayer"/><g class="imagelayer"/></g><path class="xlines-below"/><path class="ylines-below"/><g class="overlines-below"/><g class="xaxislayer-below"/><g class="yaxislayer-below"/><g class="overaxes-below"/><g class="overplot"><g class="xy" transform="translate(80,100)" clip-path="url(#clip') > 0);
          assert.ok(body.indexOf('xyplot)"><g class="scatterlayer mlayer"><g class="trace scatter trace') > 0);
          assert.ok(body.indexOf('" style="stroke-miterlimit: 2; opacity: 1;"><g class="fills"/><g class="errorbars"><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M26.75,129.29h8m-4,0V170.43m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M186.25,188.43h8m-4,0V209m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M345.75,70.14h8m-4,0V131.86m-4,0h8"/></g><g class="errorbar"><path style="vector-effect: none; stroke-width: 2px; stroke: rgb(31, 119, 180); stroke-opacity: 1;" class="yerror" d="M505.25,11h8m-4,0V93.29m-4,0h8"/></g></g><g class="lines"><path class="js-line" style="vector-effect: none; fill: none; stroke: rgb(31, 119, 180); stroke-opacity: 1; stroke-width: 2px; opacity: 1;" d="M30.75,144.71L190.25,196.14L349.75,93.29L509.25,41.86"/></g><g class="points"><path class="point" transform="translate(30.75,144.71)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(190.25,196.14)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(349.75,93.29)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/><path class="point" transform="translate(509.25,41.86)" style="opacity: 1; stroke-width: 0px; fill: rgb(31, 119, 180); fill-opacity: 1;" d="M3,0A3,3 0 1,1 0,-3A3,3 0 0,1 3,0Z"/></g><g class="text"/></g></g></g></g><path class="xlines-above crisp" style="fill: none;" d="M0,0"/><path class="ylines-above crisp" style="fill: none;" d="M0,0"/><g class="overlines-above"/><g class="xaxislayer-above"><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(110.75,0)">1</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(190.5,0)">1.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(270.25,0)">2</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(350,0)">2.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(429.75,0)">3</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(509.5,0)">3.5</text></g><g class="xtick"><text text-anchor="middle" x="0" y="333" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(589.25,0)">4</text></g></g><g class="yaxislayer-above"><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,296.14)">1</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,244.71)">2</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,193.29000000000002)">3</text></g><g class="ytick"><text text-anchor="end" x="79" y="4.199999999999999" style="font-family: \'Open Sans\', verdana, arial, sans-serif; font-size: 12px; fill: rgb(68, 68, 68); fill-opacity: 1; white-space: pre; opacity: 1;" transform="translate(0,141.86)">4</text></g></g><g class="overaxes-above"/></g></g><g class="polarlayer"/><g class="smithlayer"/><g class="ternarylayer"/><g class="geolayer"/><g class="funnelarealayer"/><g class="pielayer"/><g class="iciclelayer"/><g class="treemaplayer"/><g class="sunburstlayer"/><g class="glimages"/><defs id="topdefs-') > 0);
          assert.ok(body.indexOf('"><g class="clips"/></defs><g class="layer-above"><g class="imagelayer"/><g class="shapelayer"/></g><g class="infolayer"><g class="g-gtitle"/><g class="g-xtitle"/><g class="g-ytitle"/></g></svg>') > 0);
        });
      });
    });
  });
});
